{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Vue from 'vue';\nimport MGraph from './../../../../services/mgraph';\nimport * as LANGUAGE from '../../../store/language.json';\nimport SnackBar from '@/components/Snackbar/SnackBar.vue';\nVue.use(require('vue-moment'));\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      menu: false,\n      lead_calendar: new Date(Date.now() - new Date().getTimezoneOffset() * 60000).toISOString().substr(0, 10),\n      first_render: true,\n      changedDateTime: false,\n      status_date_time_modal: false,\n      status_date_time_value: new Date(),\n      old_val_status: '',\n      snackbar: {\n        message: '',\n        error: false\n      },\n      text: `Lead Status Updated Successfully`,\n      timeout: 2000,\n      users: [{\n        salutation: \"\",\n        firstName: \"\",\n        lastName: \"\",\n        email: \"\",\n        street: \"\",\n        mobile: \"\",\n        phone: \"\",\n        zip: \"\",\n        place: \"\",\n        source: \"\",\n        lead_date: \"\",\n        company: \"\"\n      }],\n      lead_status_id: '',\n      agents: [{\n        salutation: \"Frau\",\n        firstName: \"Jasmina\",\n        lastName: \"Dimitrijevic\",\n        birth_date: \"21.08.1991\",\n        agent: \"\",\n        additional_info: \"\",\n        nr_people: \"\",\n        insurance: \"\"\n      }],\n      lead_status_data: [],\n      lead_details: {\n        user_id: \"\",\n        salutation: \"\",\n        first_name: \"\",\n        last_name: \"\",\n        email: \"\",\n        birthday: \"\",\n        street_no: \"\",\n        zip: \"\",\n        place: \"\",\n        persons: \"\",\n        company: \"\",\n        fax: \"\",\n        phone: \"\",\n        status_id: \"\",\n        client_type_id: \"\",\n        created_at: \"\"\n      },\n      lead_status: '',\n      hour: '',\n      hourRules: [v => v != '' || 'Field is required!', v => v >= 8 || '0 is the minimum', v => v < 20 || 'Value should be smaller than 24'],\n      minute: '',\n      minuteRules: [v => v != '' || 'Field is required!', v => v >= 0 || '0 is the minimum', v => v < 60 || 'Value should be smaller than 60']\n    };\n  },\n  methods: {\n    translate(word) {\n      let wordIndex = null;\n      LANGUAGE.forEach((lng, index) => {\n        if (lng.english.toLowerCase() == word.toLowerCase()) {\n          wordIndex = index;\n        }\n      });\n      if (wordIndex === null) {\n        return word;\n      }\n      if (this.$store.state.language == 'german') {\n        return LANGUAGE[wordIndex].german;\n      } else {\n        return LANGUAGE[wordIndex].english;\n      }\n    },\n    allowedDates(val) {\n      const day = new Date(val).getDay();\n      if (day != 0 && day != 6) return val;\n    },\n    //todo this endpoint doesnt work, change it when the backend guys provide working endpoint\n    updateLeadStatus(triggerNotif) {\n      var date = new Date(`${this.lead_calendar} ${this.hour}:${this.minute}`);\n      var offset = 1; // CET is 1 hour ahead of UTC\n      var utc = date.getTime() + date.getTimezoneOffset() * 60000;\n      var cet = new Date(utc + 3600000 * offset);\n      axios.put(\"/leadstatus/\" + this.$router.currentRoute.params.id, {\n        status: this.lead_status_id,\n        scheduled_at: cet\n      }).then(() => {\n        if (triggerNotif) {\n          this.snackbar = {\n            message: 'Data updated successfully',\n            error: false\n          };\n          this.$refs.snackbar.toggleSnackbar(true);\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    async updateDateTimeLeadStatus() {\n      if (!this.$refs.formSchedule.validate()) return;\n      this.status_date_time_modal = false;\n      this.changedDateTime = true;\n      const params = {\n        \"subject\": `${this.lead_details.first_name} ${this.lead_details.last_name} - ${this.lead_details.user_id}`,\n        \"start\": {\n          \"dateTime\": this.lead_calendar,\n          \"timeZone\": \"UTC\"\n        },\n        \"end\": {\n          \"dateTime\": this.lead_calendar,\n          \"timeZone\": \"UTC\"\n        }\n      };\n      await MGraph.createEvent(params);\n      this.updateLeadStatus(true);\n    },\n    getLeadData(itemId) {\n      axios.get(\"/lead/\" + itemId).then(response => {\n        this.lead_details = {};\n        this.lead_details.user_id = response.data.data.user_id;\n        this.lead_details.salutation = response.data.data.salutation;\n        this.lead_details.first_name = response.data.data.first_name;\n        this.lead_details.last_name = response.data.data.last_name;\n        this.lead_details.email = response.data.data.email;\n        this.lead_details.birthday = response.data.data.birthday;\n        this.lead_details.street_no = response.data.data.street_no;\n        this.lead_details.zip = response.data.data.zip;\n        this.lead_details.place = response.data.data.place;\n        this.lead_details.persons = response.data.data.persons;\n        this.lead_details.company = response.data.data.company;\n        this.lead_details.fax = response.data.data.fax;\n        this.lead_details.phone = response.data.data.phone;\n        this.lead_details.created_at = response.data.data.created_at;\n        this.lead_details.status_id = parseInt(response.data.data.status_id);\n        this.lead_status_id = parseInt(response.data.data.status_id);\n        this.lead_status = parseInt(response.data.data.status_id);\n        this.lead_details.client_type_id = parseInt(response.data.data.client_type_id);\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    getLeadStatuses() {\n      axios.get('/leadstatus').then(response => {\n        for (let $i = 0; response.data.length > 0; $i++) {\n          this.lead_status_data.push({\n            text: this.translate(response.data[$i].en),\n            value: response.data[$i].id\n          });\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  },\n  watch: {\n    lead_status_id: function (newVal, oldVal) {\n      const needsDateTime = [2, 8, 13];\n      if (needsDateTime.includes(newVal) && !this.first_render) {\n        this.old_val_status = oldVal;\n        this.status_date_time_modal = true;\n        return;\n      }\n      let triggerNotif = false;\n      if (oldVal !== '') {\n        triggerNotif = true;\n      }\n      this.first_render = false;\n      this.lead_status = newVal;\n      this.updateLeadStatus(triggerNotif);\n    },\n    status_date_time_modal: function (newVal) {\n      if (!newVal) {\n        this.$nextTick(() => {\n          if (!this.changedDateTime) {\n            this.lead_status_id = this.old_val_status;\n          } else {\n            this.changedDateTime = false;\n          }\n        });\n      }\n    }\n  },\n  mounted() {\n    this.getLeadData(this.$route.params.id);\n    this.getLeadStatuses();\n  },\n  components: {\n    SnackBar\n  }\n};","map":{"version":3,"names":["Vue","MGraph","LANGUAGE","SnackBar","use","require","axios","data","menu","lead_calendar","Date","now","getTimezoneOffset","toISOString","substr","first_render","changedDateTime","status_date_time_modal","status_date_time_value","old_val_status","snackbar","message","error","text","timeout","users","salutation","firstName","lastName","email","street","mobile","phone","zip","place","source","lead_date","company","lead_status_id","agents","birth_date","agent","additional_info","nr_people","insurance","lead_status_data","lead_details","user_id","first_name","last_name","birthday","street_no","persons","fax","status_id","client_type_id","created_at","lead_status","hour","hourRules","v","minute","minuteRules","methods","translate","word","wordIndex","forEach","lng","index","english","toLowerCase","$store","state","language","german","allowedDates","val","day","getDay","updateLeadStatus","triggerNotif","date","offset","utc","getTime","cet","put","$router","currentRoute","params","id","status","scheduled_at","then","$refs","toggleSnackbar","catch","console","log","updateDateTimeLeadStatus","formSchedule","validate","createEvent","getLeadData","itemId","get","response","parseInt","getLeadStatuses","$i","length","push","en","value","watch","newVal","oldVal","needsDateTime","includes","$nextTick","mounted","$route","components"],"sources":["src/components/Leads/LeadDetails/LeadsInfo.vue"],"sourcesContent":["<template>\r\n  <v-container>\r\n    <v-dialog\r\n      v-model=\"status_date_time_modal\"\r\n      width=\"500\"\r\n      \r\n    >\r\n      <v-card>\r\n        <v-card-title class=\"text-h5 lighten-2\" style=\"padding: 16px 16px 10px\">\r\n          {{translate('Set a date and time')}}\r\n        </v-card-title>\r\n\r\n        <v-col>\r\n          <v-row>\r\n            <div style=\"width: 50%;\">\r\n              <v-menu\r\n                ref=\"menu\"\r\n                v-model=\"menu\"\r\n                :close-on-content-click=\"false\"\r\n                :return-value.sync=\"lead_calendar\"\r\n                transition=\"scale-transition\"\r\n                offset-y\r\n                min-width=\"auto\"\r\n              >\r\n                <template v-slot:activator=\"{ on, attrs }\">\r\n                  <v-text-field\r\n                    v-model=\"lead_calendar\"\r\n                    :label=\"translate('Date')\"\r\n                    prepend-icon=\"mdi-calendar\"\r\n                    readonly\r\n                    v-bind=\"attrs\"\r\n                    v-on=\"on\"\r\n                  ></v-text-field>\r\n                </template>\r\n                <v-date-picker\r\n                  v-model=\"lead_calendar\"\r\n                  :min=\"new Date().toISOString()\"\r\n                  :first-day-of-week=\"1\"\r\n                  :allowed-dates=\"allowedDates\"\r\n                  no-title\r\n                  scrollable\r\n                >\r\n                  <v-spacer></v-spacer>\r\n                  <v-btn\r\n                    text\r\n                    color=\"primary\"\r\n                    @click=\"menu = false\"\r\n                  >\r\n                    {{translate('Cancel')}}\r\n                  </v-btn>\r\n                  <v-btn\r\n                    text\r\n                    color=\"primary\"\r\n                    @click=\"$refs.menu.save(lead_calendar)\"\r\n                  >\r\n                    OK\r\n                  </v-btn>\r\n                </v-date-picker>\r\n              </v-menu>\r\n            </div>\r\n            <div\r\n              style=\"width: 50%;  padding: 0 10px;\"\r\n            >\r\n              <v-form style=\"display: flex; gap: 10px;\" ref=\"formSchedule\">\r\n                <v-text-field\r\n                  v-model=\"hour\"\r\n                  :rules=\"hourRules\"\r\n                  :label=\"translate('Hour')\"\r\n                  type=\"number\"\r\n                  style=\"width: 50%\"\r\n                />\r\n                <v-text-field\r\n                  v-model=\"minute\"\r\n                  :rules=\"minuteRules\"\r\n                  :label=\"translate('Minutes')\"\r\n                  type=\"number\"\r\n                  style=\"width: 50%\"\r\n                />\r\n              </v-form>\r\n            </div>\r\n          </v-row>\r\n        </v-col>\r\n\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn\r\n            color=\"error\"\r\n            @click=\"status_date_time_modal = false\"\r\n          >\r\n             {{translate('Cancel')}}\r\n          </v-btn>\r\n          <v-btn\r\n            color=\"primary\"\r\n            @click=\"updateDateTimeLeadStatus\"\r\n          >\r\n            {{translate('Confirm')}}\r\n          </v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n    <v-row>\r\n      <!-- <v-snackbar v-model=\"snackbar\" color=\"success\" :timeout=\"timeout\">\r\n        {{ translate(text) }}\r\n      </v-snackbar> -->\r\n\r\n      <SnackBar :data=\"snackbar\" ref=\"snackbar\" />\r\n      <v-col cols=\"12\" md=\"12\" lg=\"12\" class=\"px-0 mb-4\">\r\n        <v-row>\r\n          <v-col cols=\"12\" md=\"4\" lg=\"4\" class=\"d-flex justify-start px-0\">\r\n            <v-btn @click=\"$router.push('/leads')\" class=\"buttons\"\r\n            >\r\n              <v-icon>mdi-chevron-left</v-icon>\r\n              {{ translate('Back') }}\r\n            </v-btn\r\n            >\r\n          </v-col>\r\n          <v-col cols=\"12\" md=\"8\" lg=\"8\" class=\"d-flex justify-end\" no-gutters>\r\n            <v-col\r\n                cols=\"12\"\r\n                xs=\"12\" \r\n                sm=\"12\"\r\n                md=\"12\"\r\n                lg=\"12\"\r\n                class=\"pt-0\"\r\n                no-gutters\r\n            >\r\n              <v-select no-gutters v-model=\"lead_status_id\" label=\"Status\" :items=\"lead_status_data\" class=\"px-0\"></v-select>\r\n            </v-col>\r\n            <v-btn @click=\"snackbar = true\" icon class=\"buttons\"\r\n            >\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n              <path d=\"M17.3677 20.0003H2.63161C1.93361 20.0003 1.26433 19.7229 0.770772 19.2295C0.277344 18.7359 0 18.0667 0 17.3687V2.6326C0 1.93459 0.277362 1.26532 0.770772 0.771755C1.26433 0.278328 1.93361 0.000983279 2.63161 0.000983279H14.7363C14.8762 0.000278415 15.0107 0.0550806 15.1101 0.153586L19.8468 4.89027C19.9453 4.98966 20.0001 5.12411 19.9994 5.26403V17.3687C19.9994 18.0667 19.722 18.736 19.2286 19.2296C18.735 19.723 18.0658 20.0004 17.3678 20.0004L17.3677 20.0003ZM2.63161 1.05352C2.21275 1.05352 1.81113 1.21987 1.51511 1.51591C1.21909 1.81195 1.05272 2.21356 1.05272 2.63242V17.3685C1.05272 17.7873 1.21907 18.189 1.51511 18.485C1.81115 18.781 2.21275 18.9474 2.63161 18.9474H17.3677C17.7865 18.9474 18.1882 18.781 18.4842 18.485C18.7802 18.1889 18.9466 17.7873 18.9466 17.3685V5.47939L14.5204 1.0532L2.63161 1.05352Z\" fill=\"white\"/>\r\n              <path d=\"M9.9996 15.7892C9.30159 15.7892 8.63232 15.512 8.13894 15.0185C7.64537 14.525 7.36816 13.8558 7.36816 13.1578C7.36816 12.4598 7.64535 11.7905 8.13894 11.2971C8.63236 10.8036 9.30159 10.5264 9.9996 10.5264C10.6976 10.5264 11.3669 10.8036 11.8603 11.2971C12.3538 11.7906 12.631 12.4598 12.631 13.1578C12.631 13.8558 12.3538 14.5251 11.8603 15.0185C11.3668 15.512 10.6976 15.7892 9.9996 15.7892ZM9.9996 11.5789C9.58091 11.5789 9.17929 11.7453 8.88309 12.0413C8.58705 12.3375 8.4207 12.7391 8.4207 13.1578C8.4207 13.5765 8.58705 13.9781 8.88309 14.2743C9.17931 14.5703 9.58092 14.7367 9.9996 14.7367C10.4183 14.7367 10.8199 14.5703 11.1161 14.2743C11.4121 13.9781 11.5785 13.5765 11.5785 13.1578C11.5785 12.7391 11.4121 12.3375 11.1161 12.0413C10.8199 11.7453 10.4183 11.5789 9.9996 11.5789Z\" fill=\"white\"/>\r\n              <path d=\"M13.1574 7.32617H6.84177C6.14377 7.32617 5.4745 7.0488 4.98111 6.55539C4.48755 6.06183 4.21034 5.39256 4.21034 4.69455V0.526359C4.21034 0.235779 4.44595 0 4.73652 0H14.1309C14.5706 0 14.9923 0.174806 15.3033 0.485668C15.6141 0.796512 15.7888 1.21819 15.7888 1.65784V4.69455C15.7888 5.39256 15.5116 6.06183 15.018 6.55539C14.5246 7.04882 13.8554 7.32617 13.1574 7.32617ZM5.26288 1.05254V4.69455V4.69438C5.26288 5.11324 5.42923 5.51486 5.72527 5.81088C6.02149 6.10692 6.4231 6.27327 6.84177 6.27327H13.1574C13.576 6.27327 13.9777 6.10692 14.2739 5.81088C14.5699 5.51484 14.7363 5.11323 14.7363 4.69438V1.65766C14.7334 1.32462 14.464 1.05534 14.1309 1.05254L5.26288 1.05254Z\" fill=\"white\"/>\r\n            </svg>\r\n            </v-btn\r\n            >\r\n          </v-col>\r\n        </v-row>\r\n      </v-col>\r\n      <v-row style=\"max-width: max-content; flex-wrap: nowrap;\">\r\n        <div style=\"max-width: max-content\" class=\"data-container\">\r\n          <h4><span class=\"prefix\">{{ translate(\"Salutation\") }}: </span></h4>\r\n          <h4><span class=\"prefix\">{{ translate(\"First Name\") }}: </span></h4>\r\n          <h4><span class=\"prefix\">{{ translate(\"Last Name\") }}: </span></h4>\r\n          <h4><span class=\"prefix\">{{ translate(\"Email\") }}: </span></h4>\r\n          <h4><span class=\"prefix\">{{ translate(\"Street\") }}: </span></h4>\r\n          <h4><span class=\"prefix\">{{ translate(\"Tel Nr\") }}: </span></h4>\r\n          <h4><span class=\"prefix\">{{ translate(\"ZIP\") }}: </span></h4>\r\n          <h4><span class=\"prefix\">{{ translate(\"Place\") }}: </span></h4>\r\n          <h4><span class=\"prefix\">{{ translate(\"Source\") }}: </span></h4>\r\n          <h4><span\r\n              class=\"prefix\">{{translate(\"Lead Date\")}}: </span>\r\n          </h4>\r\n          <h4><span class=\"prefix\">{{ translate(\"Actual insurance company\") }}: </span></h4>\r\n        </div>\r\n\r\n        <div class=\"data-container\">\r\n          <h4>{{ lead_details.salutation }}&nbsp;</h4>\r\n          <h4>{{ lead_details.first_name }}&nbsp;</h4>\r\n          <h4>{{ lead_details.last_name }}&nbsp;</h4>\r\n          <h4>{{ lead_details.email }}&nbsp;</h4>\r\n          <h4>{{ lead_details.street_no }}&nbsp;</h4>\r\n          <h4>{{ lead_details.phone }}&nbsp;</h4>\r\n          <h4>{{ lead_details.zip }}&nbsp;</h4>\r\n          <h4>{{ lead_details.place }}&nbsp;</h4>\r\n          <h4>{{ lead_details.source }}&nbsp;</h4>\r\n          <h4>{{ lead_details.created_at | moment(\"DD.MM.YYYY HH:mm\") }}&nbsp;</h4>\r\n          <h4>{{ lead_details.company }}&nbsp;</h4>\r\n        </div>\r\n      </v-row>\r\n\r\n      <!-- <v-col\r\n          cols=\"12\"\r\n          xs=\"12\"\r\n          sm=\"12\"\r\n          md=\"12\"\r\n          lg=\"12\"\r\n          class=\"mt-4\"\r\n      >\r\n        <v-select no-gutters v-model=\"lead_status_id\" label=\"Status\" :items=\"lead_status_data\" class=\"px-0\"></v-select>\r\n      </v-col> -->\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport MGraph from './../../../../services/mgraph';\r\nimport * as LANGUAGE from '../../../store/language.json';\r\nimport SnackBar from '@/components/Snackbar/SnackBar.vue';\r\n\r\nVue.use(require('vue-moment'));\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      menu: false,\r\n      lead_calendar: new Date(Date.now() - new Date().getTimezoneOffset() * 60000)\r\n      .toISOString()\r\n      .substr(0, 10),\r\n      first_render: true,\r\n      changedDateTime: false,\r\n      status_date_time_modal: false,\r\n      status_date_time_value: new Date(),\r\n      old_val_status: '',\r\n      snackbar: {\r\n        message: '',\r\n        error: false\r\n      },\r\n      text: `Lead Status Updated Successfully`,\r\n      timeout: 2000,\r\n      users: [\r\n        {\r\n          salutation: \"\",\r\n          firstName: \"\",\r\n          lastName: \"\",\r\n          email: \"\",\r\n          street: \"\",\r\n          mobile: \"\",\r\n          phone: \"\",\r\n          zip: \"\",\r\n          place: \"\",\r\n          source: \"\",\r\n          lead_date: \"\",\r\n          company: \"\",\r\n        },\r\n      ],\r\n      lead_status_id: '',\r\n      agents: [\r\n        {\r\n          salutation: \"Frau\",\r\n          firstName: \"Jasmina\",\r\n          lastName: \"Dimitrijevic\",\r\n          birth_date: \"21.08.1991\",\r\n          agent: \"\",\r\n          additional_info: \"\",\r\n          nr_people: \"\",\r\n          insurance: \"\",\r\n        },\r\n      ],\r\n\r\n      lead_status_data: [],\r\n\r\n      lead_details: {\r\n        user_id: \"\",\r\n        salutation: \"\",\r\n        first_name: \"\",\r\n        last_name: \"\",\r\n        email: \"\",\r\n        birthday: \"\",\r\n        street_no: \"\",\r\n        zip: \"\",\r\n        place: \"\",\r\n        persons: \"\",\r\n        company: \"\",\r\n        fax: \"\",\r\n        phone: \"\",\r\n        status_id: \"\",\r\n        client_type_id: \"\",\r\n        created_at: \"\",\r\n      },\r\n\r\n      lead_status: '',\r\n\r\n      hour: '',\r\n      hourRules: [\r\n        v => v != '' || 'Field is required!',\r\n        v => v >= 8 || '0 is the minimum',\r\n        v => v < 20 || 'Value should be smaller than 24'\r\n      ],\r\n      minute: '',\r\n      minuteRules: [\r\n        v => v != '' || 'Field is required!',\r\n        v => v >= 0 || '0 is the minimum',\r\n        v => v < 60 || 'Value should be smaller than 60'\r\n      ]\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    translate(word) {\r\n      let wordIndex = null;\r\n\r\n      LANGUAGE.forEach((lng, index) => {\r\n        if(lng.english.toLowerCase() == word.toLowerCase()) {\r\n          wordIndex = index;\r\n        }\r\n      });\r\n\r\n      if(wordIndex === null) {\r\n        return word;\r\n      }\r\n\r\n      if(this.$store.state.language == 'german') {\r\n        return LANGUAGE[wordIndex].german;\r\n      } else {\r\n        return LANGUAGE[wordIndex].english;\r\n      }\r\n    },\r\n    allowedDates(val){\r\n      const day = new Date(val).getDay();\r\n\r\n      if(day != 0 && day != 6) return val;\r\n    },\r\n\r\n    //todo this endpoint doesnt work, change it when the backend guys provide working endpoint\r\n    updateLeadStatus(triggerNotif) {\r\n      var date = new Date(`${this.lead_calendar} ${this.hour}:${this.minute}`);\r\n      var offset = 1; // CET is 1 hour ahead of UTC\r\n      var utc = date.getTime() + (date.getTimezoneOffset() * 60000);\r\n      var cet = new Date(utc + (3600000*offset));\r\n\r\n      axios\r\n          .put(\"/leadstatus/\" + this.$router.currentRoute.params.id, {\r\n            status: this.lead_status_id,\r\n            scheduled_at: cet\r\n          })\r\n          .then(() => {\r\n            if (triggerNotif) {\r\n              this.snackbar = {\r\n                message: 'Data updated successfully',\r\n                error: false\r\n              };\r\n\r\n              this.$refs.snackbar.toggleSnackbar(true);\r\n            }\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n    },\r\n\r\n   async updateDateTimeLeadStatus() {\r\n      if(!this.$refs.formSchedule.validate()) return;\r\n\r\n      this.status_date_time_modal = false;\r\n      this.changedDateTime = true;\r\n\r\n\r\n      const params = {\r\n          \"subject\": `${this.lead_details.first_name} ${this.lead_details.last_name} - ${this.lead_details.user_id}`,\r\n          \"start\": {\r\n            \"dateTime\": this.lead_calendar,\r\n            \"timeZone\": \"UTC\"\r\n          },\r\n          \"end\": {\r\n            \"dateTime\": this.lead_calendar,\r\n            \"timeZone\": \"UTC\"\r\n          }\r\n        }\r\n\r\n      await MGraph.createEvent(params);\r\n\r\n      this.updateLeadStatus(true);\r\n    },\r\n\r\n    getLeadData(itemId) {\r\n      axios\r\n          .get(\"/lead/\" + itemId)\r\n          .then((response) => {\r\n\r\n            this.lead_details = {};\r\n\r\n            this.lead_details.user_id = response.data.data.user_id;\r\n            this.lead_details.salutation = response.data.data.salutation;\r\n            this.lead_details.first_name = response.data.data.first_name;\r\n            this.lead_details.last_name = response.data.data.last_name;\r\n            this.lead_details.email = response.data.data.email;\r\n            this.lead_details.birthday = response.data.data.birthday;\r\n            this.lead_details.street_no = response.data.data.street_no;\r\n            this.lead_details.zip = response.data.data.zip;\r\n            this.lead_details.place = response.data.data.place;\r\n            this.lead_details.persons = response.data.data.persons;\r\n            this.lead_details.company = response.data.data.company;\r\n            this.lead_details.fax = response.data.data.fax;\r\n            this.lead_details.phone = response.data.data.phone;\r\n            this.lead_details.created_at = response.data.data.created_at;\r\n\r\n            this.lead_details.status_id = parseInt(response.data.data.status_id);\r\n            this.lead_status_id = parseInt(response.data.data.status_id);\r\n            this.lead_status = parseInt(response.data.data.status_id);\r\n\r\n            this.lead_details.client_type_id = parseInt(response.data.data.client_type_id);\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n    },\r\n\r\n    getLeadStatuses() {\r\n      axios\r\n          .get('/leadstatus')\r\n          .then((response) => {\r\n\r\n            for (let $i = 0; response.data.length > 0; $i++) {\r\n              this.lead_status_data.push({text: this.translate(response.data[$i].en), value: response.data[$i].id})\r\n            }\r\n\r\n          })\r\n          .catch((error) => {\r\n            console.log(error)\r\n          })\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    lead_status_id: function (newVal, oldVal) {\r\n\r\n      const needsDateTime = [2, 8, 13];\r\n\r\n      if(needsDateTime.includes(newVal) && !this.first_render) {\r\n        this.old_val_status = oldVal;\r\n        this.status_date_time_modal = true;\r\n        return;\r\n      }\r\n      \r\n      let triggerNotif = false;\r\n      if (oldVal !== '') {\r\n        triggerNotif = true\r\n      }\r\n\r\n      this.first_render = false;\r\n      this.lead_status = newVal;\r\n      this.updateLeadStatus(triggerNotif);\r\n    },\r\n    status_date_time_modal: function(newVal) {\r\n      if(!newVal) {\r\n        this.$nextTick(() => {\r\n          if(!this.changedDateTime) {\r\n            this.lead_status_id = this.old_val_status;\r\n          } else {\r\n            this.changedDateTime = false;\r\n          }\r\n        })\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.getLeadData(this.$route.params.id);\r\n    this.getLeadStatuses();\r\n  },\r\n\r\n  components: {\r\n    SnackBar\r\n  }\r\n\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* h4 {\r\n  margin-top: 15px;\r\n} */\r\n\r\n.prefix {\r\n  margin-right: 20px;\r\n  /* color: rgba(0, 0, 0, 0.87); */\r\n  font-weight: 400;\r\n}\r\n\r\n.buttons {\r\n  background: #36a5dd !important;\r\n  border-radius: 6px !important;\r\n  color: #fff !important;\r\n  box-shadow: none;\r\n}\r\n\r\n.data-container > h4 {\r\n  padding: 7px 0;\r\n  border-bottom: 1px solid white;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}