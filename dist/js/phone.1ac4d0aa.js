"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[214],{4674:function(t,a,e){e.d(a,{Z:function(){return x}});var s=e(8819),i=e(7179),l=e(4437),r=e(5057),n=e(2469),d=e(248),o=e(1908),c=e(1495),u=function(){var t=this,a=t._self._c;return a(l.Z,{attrs:{cols:"12",md:"12",lg:"12"}},[a("div",{staticClass:"second-sidebar-header",staticStyle:{padding:"0"}},[a(r.Z,{directives:[{name:"show",rawName:"v-show",value:t.isMobile,expression:"isMobile"}],on:{click:function(a){return t.$store.dispatch("toggleSecondVariant")}}},[t._v("mdi-arrow-collapse-right")]),a("div",[a("button",{staticClass:"border-blue",staticStyle:{overflow:"hidden",cursor:"pointer"},on:{click:function(a){return t.$store.dispatch("toggleLanguage")}}},["german"==t.$store.state.language?a("div",{staticClass:"center"},[a("img",{staticStyle:{width:"24px",height:"24px","object-fit":"cover","border-radius":"999px"},attrs:{src:e(1635),alt:"german language"}}),t._v(" CH ")]):a("div",{staticClass:"center"},[a("img",{staticStyle:{width:"24px",height:"24px","border-radius":"999px","object-fit":"cover"},attrs:{src:e(5257),alt:"german language"}}),t._v(" EN ")])]),a(c.Z,{attrs:{"offset-y":"",left:"",bottom:"",transition:"slide-x-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:l}){return[a(s.Z,t._g(t._b({attrs:{size:"35"}},"v-avatar",l,!1),i),[t.$store.state.profileImage.img_path?a("img",{staticClass:"pa-1",staticStyle:{"object-fit":"contain"},attrs:{src:t.$store.state.profileImage.img_path}}):a(n.Z,{attrs:{src:e(6164)}})],1)]}}])},[a(d.Z,{staticClass:"p-0"},[a(o.Z,{staticClass:"p-0"},[a(i.Z,{staticStyle:{background:"transparent"},on:{click:t.goToProfile}},[t._v(" "+t._s(t.translate("Profile"))+" ")])],1),a(o.Z,{staticClass:"p-0"},[a(i.Z,{staticStyle:{background:"transparent"},on:{click:t.exitApp}},[t._v(t._s(t.translate("Log out")))])],1)],1)],1)],1)],1)])},h=[],_=(e(7658),e(4069)),m=e.t(_,2),p={name:"UserControl",methods:{translate(t){let a=null;return _.forEach(((e,s)=>{e.english.toLowerCase()==t.toLowerCase()&&(a=s)})),null===a?t:"german"==this.$store.state.language?m[a].german:m[a].english},goToProfile(){this.$router.push("/profile")},exitApp(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.$router.push("/login")}}},g=p,f=e(3736),v=(0,f.Z)(g,u,h,!1,null,null,null),x=v.exports},5272:function(t,a,e){e.r(a),e.d(a,{default:function(){return Q}});var s=function(){var t=this,a=t._self._c;return a("Phone")},i=[],l=e(4437),r=e(6035),n=e(5294),d=function(){var t=this,a=t._self._c;return a(r.Z,[a(n.Z,[a(l.Z,{attrs:{cols:"12",md:"12",lg:"12"}},[a(n.Z,[a(l.Z,{attrs:{cols:"12"}},[a(n.Z,{staticStyle:{"margin-left":"12px"}},[a(l.Z,{staticClass:"d-flex justify-start",attrs:{cols:"12",md:"8"}},[a("NavbarControl"),a("h2",{staticStyle:{display:"flex","align-items":"center"}},[t._v(t._s(t.translate(t.title)))])],1),a(l.Z,{attrs:{cols:"12",md:"4"}},[a("UserControl")],1)],1)],1),a(l.Z,{attrs:{cols:"12",md:"5",lg:"5"}},[a("PhoneInfo")],1),a(l.Z,{attrs:{cols:"12",md:"7",lg:"7","align-self":"center"}},[a("PhoneCard")],1)],1)],1)],1)],1)},o=[],c=e(7179),u=e(4944),h=e(5057),_=function(){var t=this,a=t._self._c;return a(r.Z,[a(n.Z,[a(l.Z,{attrs:{cols:"12",xs:"12",sm:"12",md:"6",lg:"6"}},[a(u.Z,{attrs:{label:"",color:"primary"}},[t._v(t._s(t.lead_index+1)+"/"+t._s(t.total_leads_count))])],1),a(l.Z,{staticClass:"d-flex justify-end",attrs:{cols:"12",xs:"12",sm:"12",md:"6",lg:"6"}},[a(c.Z,{directives:[{name:"show",rawName:"v-show",value:0!==t.lead_index,expression:"lead_index !== 0"}],staticClass:"save mr-1",attrs:{dark:"",icon:""},on:{click:t.previousLead}},[a(h.Z,[t._v("mdi-chevron-left")])],1),a(c.Z,{directives:[{name:"show",rawName:"v-show",value:t.lead_id!=t.all_leads[t.all_leads.length-1].id,expression:"lead_id != all_leads[all_leads.length-1].id"}],staticClass:"save ml-1",attrs:{dark:"",icon:""},on:{click:t.nextLead}},[a(h.Z,[t._v("mdi-chevron-right")])],1)],1),a(n.Z,{staticStyle:{"max-width":"max-content","flex-wrap":"nowrap","margin-left":"12px"}},[a("div",{staticClass:"data-container",staticStyle:{"max-width":"max-content"}},[a("h4",[a("span",{staticClass:"prefix"},[t._v(t._s(t.translate("Salutation"))+": ")])]),a("h4",[a("span",{staticClass:"prefix"},[t._v(t._s(t.translate("First Name"))+": ")])]),a("h4",[a("span",{staticClass:"prefix"},[t._v(t._s(t.translate("Last Name"))+": ")])]),a("h4",[a("span",{staticClass:"prefix"},[t._v(t._s(t.translate("Email"))+": ")])]),a("h4",[a("span",{staticClass:"prefix"},[t._v(t._s(t.translate("Street"))+": ")])]),a("h4",[a("span",{staticClass:"prefix"},[t._v(t._s(t.translate("Phone"))+": ")])]),a("h4",[a("span",{staticClass:"prefix"},[t._v(t._s(t.translate("ZIP"))+": ")])]),a("h4",[a("span",{staticClass:"prefix"},[t._v(t._s(t.translate("Place"))+": ")])]),a("h4",[a("span",{staticClass:"prefix"},[t._v(t._s(t.translate("Source"))+": ")])]),a("h4",[a("span",{staticClass:"prefix"},[t._v(t._s(t.translate("Lead Date"))+": ")])]),a("h4",[a("span",{staticClass:"prefix"},[t._v(t._s(t.translate("Actual Insurance"))+": ")])])]),a("div",{staticClass:"data-container"},[a("h4",{staticClass:"prefix-data"},[t._v(t._s(t.lead_details.salutation)+" ")]),a("h4",{staticClass:"prefix-data"},[t._v(t._s(t.lead_details.first_name)+" ")]),a("h4",{staticClass:"prefix-data"},[t._v(t._s(t.lead_details.last_name)+" ")]),a("h4",{staticClass:"prefix-data"},[t._v(t._s(t.lead_details.email)+" ")]),a("h4",{staticClass:"prefix-data"},[t._v(t._s(t.lead_details.street)+" ")]),a("h4",{staticClass:"prefix-data"},[t._v(t._s(t.lead_details.phone)+" ")]),a("h4",{staticClass:"prefix-data"},[t._v(t._s(t.lead_details.zip)+" ")]),a("h4",{staticClass:"prefix-data"},[t._v(t._s(t.lead_details.place)+" ")]),a("h4",{staticClass:"prefix-data"},[t._v(t._s(t.lead_details.source)+" ")]),a("h4",{staticClass:"prefix-data"},[t._v(t._s(t._f("moment")(t.lead_details.created_at,"DD.MM.YYYY"))+" ")]),a("h4",{staticClass:"prefix-data"},[t._v(t._s(t.lead_details.company)+" ")])])])],1)],1)},m=[],p=(e(7658),e(144)),g=e(4069),f=e.t(g,2),v=e(9669),x=e.n(v);p.ZP.use(e(2513));var C={data(){return{lead_id:1,all_leads:[],lead_details:{user_id:"",salutation:"",first_name:"",last_name:"",email:"",birthday:"",street_no:"",zip:"",place:"",persons:"",company:"",fax:"",phone:"",status_id:"",client_type_id:"",created_at:""},phone:[],users:[{salutation:"Frau",firstName:"Jasmina",lastName:"Dimitrijevic",email:"jdimitrijevic@gmail.com",street:"Susswinkeistrase 14",mobile:123123123,phone:176456122,zip:"1542(SZ)",place:"Reichenburg",source:"Eigener Lead",lead_date:"09.12.2021, 13:01",company:"B-Kind"}],agents:[{salutation:"Frau",firstName:"Jasmina",lastName:"Dimitrijevic",birth_date:"21.08.1991",agent:"",additional_info:"",nr_people:"",insurance:""}],items:[],total_leads_count:0,first_render:!0}},watch:{lead_id:function(t){this.$router.push({path:"phone",query:{id:t}})},lead_index:function(t){this.lead_details=this.all_leads[t],this.lead_id=this.all_leads[t].id}},computed:{lead_index(){return this.$store.state.lead_index}},methods:{translate(t){let a=null;return g.forEach(((e,s)=>{e.english.toLowerCase()==t.toLowerCase()&&(a=s)})),null===a?t:"german"==this.$store.state.language?f[a].german:f[a].english},getLeadData(t){console.log(t),x().get("/lead/"+t).then((t=>{this.lead_details={},this.lead_details.user_id=t.data.data.user_id,this.lead_details.salutation=t.data.data.salutation,this.lead_details.first_name=t.data.data.first_name,this.lead_details.last_name=t.data.data.last_name,this.lead_details.email=t.data.data.email,this.lead_details.birthday=t.data.data.birthday,this.lead_details.street_no=t.data.data.street_no,this.lead_details.zip=t.data.data.zip,this.lead_details.place=t.data.data.place,this.lead_details.persons=t.data.data.persons,this.lead_details.company=t.data.data.company,this.lead_details.fax=t.data.data.fax,this.lead_details.phone=t.data.data.phone,this.lead_details.created_at=t.data.data.created_at,this.lead_details.status_id=parseInt(t.data.data.status_id),this.lead_status=parseInt(t.data.data.status_id),this.lead_details.client_type_id=parseInt(t.data.data.client_type_id)})).catch((t=>{console.log(t)}))},getPhones(){x().get("/phone").then((t=>{this.phone=t.data.data,console.log("PhoneResponse",t)})).catch((t=>{console.log("Error",t)}))},getLeadStatuses(){x().get("/leadstatus").then((t=>{for(let a=0;t.data.length>0;a++)this.items.push({text:t.data[a].en,value:t.data[a].id})})).catch((t=>{console.log(t)}))},nextLead(){this.$store.dispatch("nextLead")},previousLead(){this.$store.dispatch("prevLead")},getTotalLeadsCount(){x().get("/lead/datatable").then((t=>{this.total_leads_count=t.data.total})).catch((t=>{console.log(t)}))},getFirstLeadId(){x().get("/lead/datatable").then((t=>{this.lead_id=t.data.data[0].id,this.$router.push({path:"phone",query:{id:this.lead_id}})})).catch((t=>{console.log(t)}))}},created(){this.getTotalLeadsCount(),this.$on("nextLead",(()=>{this.nextLead()})),x().get("/get_all_leads").then((t=>{console.log(t),this.lead_details=t.data[0],this.lead_id=t.data[0].id,this.all_leads=t.data}))}},Z=C,y=e(3736),w=(0,y.Z)(Z,_,m,!1,null,"5a2170ed",null),b=w.exports,S=e(3385),k=e(5223),L=e(7145),$=e(9789),D=e(6904),I=e(1908),P=e(4831),B=e(1495),j=e(5234),E=e(5251),V=function(){var t=this,a=t._self._c;return a("div",[a($.Z,{attrs:{width:"500"},model:{value:t.status_date_time_modal,callback:function(a){t.status_date_time_modal=a},expression:"status_date_time_modal"}},[a(S.Z,[a(k.EB,{staticClass:"text-h5 lighten-2",staticStyle:{padding:"16px 16px 10px"}},[t._v(" "+t._s(t.translate("Set a date and time"))+" ")]),a(l.Z,[a(n.Z,[a("div",{staticStyle:{width:"50%"}},[a(B.Z,{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.lead_calendar,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(a){t.lead_calendar=a},"update:return-value":function(a){t.lead_calendar=a}},scopedSlots:t._u([{key:"activator",fn:function({on:e,attrs:s}){return[a(E.Z,t._g(t._b({attrs:{label:t.translate("Date"),"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.lead_calendar,callback:function(a){t.lead_calendar=a},expression:"lead_calendar"}},"v-text-field",s,!1),e))]}}]),model:{value:t.menu,callback:function(a){t.menu=a},expression:"menu"}},[a(L.Z,{attrs:{min:(new Date).toISOString(),"first-day-of-week":1,"allowed-dates":t.allowedDates,"no-title":"",scrollable:""},model:{value:t.lead_calendar,callback:function(a){t.lead_calendar=a},expression:"lead_calendar"}},[a(j.Z),a(c.Z,{attrs:{text:"",color:"primary"},on:{click:function(a){t.menu=!1}}},[t._v(" "+t._s(t.translate("Cancel"))+" ")]),a(c.Z,{attrs:{text:"",color:"primary"},on:{click:function(a){return t.$refs.menu.save(t.lead_calendar)}}},[t._v(" OK ")])],1)],1)],1),a("div",{staticStyle:{width:"50%",padding:"0 10px"}},[a(D.Z,{ref:"formSchedule",staticStyle:{display:"flex",gap:"10px"}},[a(E.Z,{staticStyle:{width:"50%"},attrs:{rules:t.hourRules,label:t.translate("Hour"),type:"number"},model:{value:t.hour,callback:function(a){t.hour=a},expression:"hour"}}),a(E.Z,{staticStyle:{width:"50%"},attrs:{rules:t.minuteRules,label:t.translate("Minutes"),type:"number"},model:{value:t.minute,callback:function(a){t.minute=a},expression:"minute"}})],1)],1)])],1),a(k.h7,[a(j.Z),a(c.Z,{attrs:{color:"error"},on:{click:function(a){t.status_date_time_modal=!1}}},[t._v(" "+t._s(t.translate("Cancel"))+" ")]),a(c.Z,{attrs:{color:"primary"},on:{click:t.updateDateTimeLeadStatus}},[t._v(" "+t._s(t.translate("Confirm"))+" ")])],1)],1)],1),a("SnackBar",{ref:"snackbar",attrs:{data:t.snackbar}}),a(l.Z,{attrs:{cols:"12",xs:"12",sm:"12",md:"12",lg:"12"}},[a(S.Z,{staticClass:"pa-5 phone-card",attrs:{outlined:"",rounded:""}},t._l(t.lead_last_note,(function(e){return a("div",{key:e.id},[a(I.Z,{attrs:{"three-line":""}},[a(P.km,[a("p",{staticClass:"text mb-4"},[t._v(t._s(t._f("moment")(e.created_at,"DD.MM.YYYY, HH:mm")))]),a(P.V9,{staticClass:"text-h6 mb-1"},[t._v(" "+t._s(t.getKvg.text||"")+" ")]),e.note?a(P.oZ,{staticClass:"mt-4"},[t._v(t._s(e.note))]):a(P.oZ,{staticClass:"mt-4"},[t._v(t._s(t.translate("Empty")))])],1)],1)],1)})),0)],1),a("div",[a(n.Z,{staticClass:"d-flex justify-end"},[t.current_lead?a(l.Z,{staticClass:"mt-5 d-flex justify-end",staticStyle:{width:"100%",flex:"1"},attrs:{cols:"6"}},[a(u.Z,{staticClass:"status-btn ruckruf",staticStyle:{width:"100%",flex:"1"},attrs:{large:"",label:""}},[a("div",[a("h4",{staticStyle:{"text-align":"start"}},[t._v(t._s(t.translate(t.current_lead.status.en)))]),a("p",[t._v(t._s(t._f("moment")(t.scheduled_at,"DD.MM.YYYY HH:mm")))])])])],1):t._e(),a(l.Z,{staticClass:"mt-5 d-flex justify-end",staticStyle:{width:"100%",flex:"1"},attrs:{cols:"6"}},[a(u.Z,{staticStyle:{width:"100%",flex:"1","flex-basis":"min-content","font-weight":"bold","font-size":"18px"},attrs:{large:"",label:"",color:"primary"}},[t._v(t._s(t.current_lead.phone))])],1)],1),a(n.Z,t._l(t.lead_statuses,(function(e){return a(l.Z,{key:e.id,attrs:{cols:"12",sm:"6",md:"4"}},[a("div",[a(c.Z,{staticClass:"status-btn",attrs:{block:""},on:{click:function(a){return t.updateLeadStatus(e.id)}}},[t._v(t._s(t.translate(e.name)))])],1)])})),1)],1)],1)},N=[],R=e(8209),z={data(){return{snackbar:{show:!1,message:null,color:null},lead_last_note:[{id:0,created_at:"",note:""}],menu:!1,kvg:[],insurances_list:[],infos:[{date:"15.12.2021, 10:48",title:"300 Franchise / standard",name:"Ricard Dimitrijevic",content:"Schickt mir die Police uber email bis 15.12.2021 um 20: Uhr"}],lead_statuses:[],current_lead:{kvg_id:1},items:[],status_date_time_modal:!1,lead_calendar:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),current_selected_status_id:0,hour:(new Date).getHours(),hourRules:[t=>""!=t||"Field is required!",t=>t>=8||"0 is the minimum",t=>t<20||"Value should be smaller than 24"],minute:(new Date).getMinutes(),minuteRules:[t=>""!=t||"Field is required!",t=>t>=0||"0 is the minimum",t=>t<60||"Value should be smaller than 60"]}},methods:{translate(t){let a=null;return g.forEach(((e,s)=>{e.english.toLowerCase()==t.toLowerCase()&&(a=s)})),null===a?t:"german"==this.$store.state.language?f[a].german:f[a].english},allowedDates(t){const a=new Date(t).getDay();if(0!=a&&6!=a)return t},getInsurances(){x().get("/insurances").then((t=>{console.log("insurances",t.data.data),console.log("current_lead",this.current_lead);for(let e=0;t.data.data.length>0;e++)this.insurances_list.push({text:t.data.data[e].name,value:t.data.data[e].id});const a=t.data.data.filter((t=>t.id==this.current_lead.kvg_id));this.kvg=a})).catch((t=>{console.log(t)}))},getLeadLastNote(){x().get("/leadnote/"+this.$router.currentRoute.query.id).then((t=>{this.lead_last_note=[t.data.data[t.data.data.length-1]]})).catch((t=>{console.log(t)}))},getLeadStatuses(){x().get("/leadstatus").then((t=>{for(let a=0;t.data.length>0;a++)console.log(t.data[a].en),this.lead_statuses.push({name:t.data[a].en,id:t.data[a].id})})).catch((t=>{console.log(t)}))},updateLeadStatus(t,a=!1){var e=new Date(`${this.lead_calendar} ${this.hour}:${this.minute}`),s=1,i=e.getTime()+6e4*e.getTimezoneOffset(),l=new Date(i+36e5*s);const r=[2,8,13];if(r.includes(t)&&!a)return this.current_selected_status_id=t,void(this.status_date_time_modal=!0);x().put("/leadstatus/"+this.$router.currentRoute.query.id,{status:t,scheduled_at:l}).then((()=>{this.snackbar={message:"Data updated successfully",color:"success",show:!0,error:!1},this.$refs.snackbar.toggleSnackbar(),this.updateCurrentLeadStatus(),this.$store.dispatch("nextLead")})).catch((t=>console.log(t)))},updateDateTimeLeadStatus(){this.updateLeadStatus(this.current_selected_status_id,!0),this.status_date_time_modal=!1,this.this.updateCurrentLeadStatus()},updateCurrentLeadStatus(t=!1){void 0!=this.$router.currentRoute.query.id?(x().get("/lead/"+this.$router.currentRoute.query.id).then((t=>{const a={status:t.data.data.status,scheduled_at:t.data.data.scheduled_at,phone:t.data.data.phone,kvg_id:t.data.data.kvg_id,vvg_id:t.data.data.vvg_id};console.log(t),this.current_lead=a})),t&&this.$router.push({path:"phone",query:{id:parseInt(this.$router.currentRoute.query.id)+1}})):setTimeout((()=>{this.updateCurrentLeadStatus()}),300)},init(){this.getLeadStatuses(),this.updateCurrentLeadStatus(),this.getLeadLastNote(),this.getInsurances()}},mounted(){let t=null;t=setInterval((()=>{void 0!=this.$router.currentRoute.query.id&&(this.init(),clearInterval(t),console.log("asdlkjaslkdadasdjl"))}),150)},watch:{$route(){this.updateCurrentLeadStatus()}},computed:{scheduled_at(){const t=[2,8,13];return t.includes(this.current_lead.status.id)?this.current_lead.scheduled_at.scheduled_at:null},getKvg(){return this.insurances_list.find((t=>t.value==this.current_lead.kvg_id))}},components:{SnackBar:R.Z}},Y=z,q=(0,y.Z)(Y,V,N,!1,null,"ed2c9fd2",null),T=q.exports,M=e(6563),F=e(4674),H={name:"PhoneComponent",data(){return{title:"Phone"}},components:{PhoneInfo:b,PhoneCard:T,NavbarControl:M.Z,UserControl:F.Z},methods:{translate(t){let a=null;return g.forEach(((e,s)=>{e.english.toLowerCase()==t.toLowerCase()&&(a=s)})),null===a?t:"german"==this.$store.state.language?f[a].german:f[a].english}}},O=H,A=(0,y.Z)(O,d,o,!1,null,"2ad28f16",null),K=A.exports,U={name:"PhoneView",components:{Phone:K}},J=U,G=(0,y.Z)(J,s,i,!1,null,null,null),Q=G.exports},6904:function(t,a,e){e(7658);var s=e(4987),i=e(4609),l=e(380);a["Z"]=(0,s.Z)(i.Z,(0,l.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const a=Object.values(t).includes(!0);this.$emit("input",!a)},deep:!0,immediate:!0}},methods:{watchInput(t){const a=t=>t.$watch("hasError",(a=>{this.$set(this.errorBag,t._uid,a)}),{immediate:!0}),e={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?e.shouldValidate=t.$watch("shouldValidate",(s=>{s&&(this.errorBag.hasOwnProperty(t._uid)||(e.valid=a(t)))})):e.valid=a(t),e},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const a=this.inputs.find((a=>a._uid===t._uid));if(!a)return;const e=this.watchers.find((t=>t._uid===a._uid));e&&(e.valid(),e.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==a._uid)),this.inputs=this.inputs.filter((t=>t._uid!==a._uid)),this.$delete(this.errorBag,a._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})}}]);
//# sourceMappingURL=phone.1ac4d0aa.js.map