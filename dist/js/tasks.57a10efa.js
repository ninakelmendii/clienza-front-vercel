"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[716],{4674:function(t,e,a){a.d(e,{Z:function(){return v}});var s=a(8819),i=a(7179),l=a(4437),n=a(5057),r=a(2469),o=a(248),c=a(1908),d=a(1495),u=function(){var t=this,e=t._self._c;return e(l.Z,{attrs:{cols:"12",md:"12",lg:"12"}},[e("div",{staticClass:"second-sidebar-header",staticStyle:{padding:"0"}},[e(n.Z,{directives:[{name:"show",rawName:"v-show",value:t.isMobile,expression:"isMobile"}],on:{click:function(e){return t.$store.dispatch("toggleSecondVariant")}}},[t._v("mdi-arrow-collapse-right")]),e("div",[e("button",{staticClass:"border-blue",staticStyle:{overflow:"hidden",cursor:"pointer"},on:{click:function(e){return t.$store.dispatch("toggleLanguage")}}},["german"==t.$store.state.language?e("div",{staticClass:"center"},[e("img",{staticStyle:{width:"24px",height:"24px","object-fit":"cover","border-radius":"999px"},attrs:{src:a(1635),alt:"german language"}}),t._v(" CH ")]):e("div",{staticClass:"center"},[e("img",{staticStyle:{width:"24px",height:"24px","border-radius":"999px","object-fit":"cover"},attrs:{src:a(5257),alt:"german language"}}),t._v(" EN ")])]),e(d.Z,{attrs:{"offset-y":"",left:"",bottom:"",transition:"slide-x-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:l}){return[e(s.Z,t._g(t._b({attrs:{size:"35"}},"v-avatar",l,!1),i),[t.$store.state.profileImage.img_path?e("img",{staticClass:"pa-1",staticStyle:{"object-fit":"contain"},attrs:{src:t.$store.state.profileImage.img_path}}):e(r.Z,{attrs:{src:a(6164)}})],1)]}}])},[e(o.Z,{staticClass:"p-0"},[e(c.Z,{staticClass:"p-0"},[e(i.Z,{staticStyle:{background:"transparent"},on:{click:t.goToProfile}},[t._v(" "+t._s(t.translate("Profile"))+" ")])],1),e(c.Z,{staticClass:"p-0"},[e(i.Z,{staticStyle:{background:"transparent"},on:{click:t.exitApp}},[t._v(t._s(t.translate("Log out")))])],1)],1)],1)],1)],1)])},h=[],p=(a(7658),a(4069)),m=a.t(p,2),g={name:"UserControl",methods:{translate(t){let e=null;return p.forEach(((a,s)=>{a.english.toLowerCase()==t.toLowerCase()&&(e=s)})),null===e?t:"german"==this.$store.state.language?m[e].german:m[e].english},goToProfile(){this.$router.push("/profile")},exitApp(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.$router.push("/login")}}},_=g,f=a(3736),k=(0,f.Z)(_,u,h,!1,null,null,null),v=k.exports},642:function(t,e,a){a.r(e),a.d(e,{default:function(){return at}});var s=function(){var t=this,e=t._self._c;return e("Tasks")},i=[],l=a(4437),n=a(6035),r=a(5294),o=function(){var t=this,e=t._self._c;return e(n.Z,[e(r.Z,[e(l.Z,{attrs:{cols:"12",md:"12",lg:"12"}},[e(r.Z,[e(r.Z,{staticStyle:{"margin-left":"12px"}},[e(l.Z,{staticClass:"d-flex justify-start",attrs:{cols:"12",md:"8"}},[e("NavbarControl"),e("h2",{staticStyle:{display:"flex","align-items":"center"}},[t._v(t._s(t.translate(t.title)))])],1),e(l.Z,{attrs:{cols:"12",md:"4"}},[e("UserControl")],1)],1),e(l.Z,{staticStyle:{"margin-top":"24px"},attrs:{cols:"12",md:"12",lg:"12"}},[e("TasksTable")],1)],1)],1)],1)],1)},c=[],d=a(7179),u=a(3385),h=a(5223),p=a(7652),m=a(7145),g=a(9789),_=a(6904),f=a(5057),k=a(1495),v=a(2927),C=a(5234),y=a(6660),b=a(5251),Z=a(5617),w=a(5838),x=function(){var t=this,e=t._self._c;return e(r.Z,[e("SnackBar",{ref:"snackbar",attrs:{data:t.snackbar}}),e(l.Z,[e(b.Z,{attrs:{rounded:"",filled:"","background-color":"white",label:t.translate("Search"),"prepend-inner-icon":"mdi-magnify"},model:{value:t.search_string,callback:function(e){t.search_string=e},expression:"search_string"}})],1),e(l.Z,[e(k.Z,{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(b.Z,t._g(t._b({attrs:{label:t.translate("Select Date"),"prepend-inner-icon":"mdi-calendar",readonly:"","background-color":"#fff",rounded:"",filled:""},model:{value:t.formated_date,callback:function(e){t.formated_date=e},expression:"formated_date"}},"v-text-field",s,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[e(m.Z,{attrs:{"no-title":"",scrollable:"",range:""},model:{value:t.calendar_date,callback:function(e){t.calendar_date=e},expression:"calendar_date"}},[e(C.Z),e(d.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v(" Cancel ")]),e(d.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.date)}}},[t._v(" OK ")])],1)],1)],1),e(l.Z,[e(v.Z,{attrs:{items:t.task_type_select,rounded:"",filled:"","background-color":"white",label:t.translate("Status"),"prepend-inner-icon":"mdi-filter-multiple-outline"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1),e(l.Z,{staticClass:"d-flex justify-between",attrs:{cols:"12",md:"12",lg:"12"}},[e(r.Z,{staticClass:"d-flex justify-start"},[e(l.Z,{attrs:{cols:"6",md:"6",lg:"6"}},[e(y.Z,{attrs:{inset:"",label:t.translate("Show completed task")},model:{value:t.showCompleted,callback:function(e){t.showCompleted=e},expression:"showCompleted"}})],1)],1)],1),e(l.Z,{attrs:{cols:"12",md:"12",lg:"12",sm:"12"}},[e("div",{staticClass:"d-flex justify-end"},[e(d.Z,{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:t.openDialog}},[e(f.Z,[t._v("mdi-plus")]),t._v(" "+t._s(t.translate("New Task"))+" ")],1)],1),e(p.Z,{attrs:{headers:t.headers,items:t.tasks,loading:t.loading,options:t.options,"server-items-length":t.totalTaskTable,"footer-props":{"items-per-page-text":t.translate("Rows per page"),"items-per-page-all-text":t.translate("All")},search:t.search},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"loading",fn:function(){return[t._v(" "+t._s(t.translate("Loading items"))+"... ")]},proxy:!0},{key:"no-data",fn:function(){return[t._v(" "+t._s(t.translate("No data available"))+" ")]},proxy:!0},{key:"top",fn:function(){return[e(w.Z,{attrs:{flat:""}},[e(C.Z),e(g.Z,{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(u.Z,[e(h.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.translate(t.formTitle)))])]),e(h.ZB,[e(n.Z,[e(r.Z,[e(l.Z,{attrs:{cols:"12"}},[e(l.Z,{staticClass:"p-0",attrs:{cols:"12","no-gutters":""}},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.client_type,expression:"client_type"}],attrs:{type:"radio",value:"actual"},domProps:{checked:t._q(t.client_type,"actual")},on:{change:function(e){t.client_type="actual"}}}),t._v(" "+t._s(t.translate("Actual client"))+" ")])]),e(l.Z,{staticClass:"p-0 mt-2",attrs:{cols:"12","no-gutters":""}},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.client_type,expression:"client_type"}],attrs:{type:"radio",value:"new"},domProps:{checked:t._q(t.client_type,"new")},on:{change:function(e){t.client_type="new"}}}),t._v(" "+t._s(t.translate("New client"))+" "),e("br"),e("small",[t._v("("+t._s(t.translate("Customer should be added manually. Click here to add new."))+")")])])])],1),e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},["actual"==t.client_type?e(v.Z,{attrs:{items:t.customer_list_select,label:t.translate("Customer")},model:{value:t.create_task_data.customer_id,callback:function(e){t.$set(t.create_task_data,"customer_id",e)},expression:"create_task_data.customer_id"}}):e(b.Z,{attrs:{label:t.translate("Customer")},model:{value:t.create_task_data.new_client,callback:function(e){t.$set(t.create_task_data,"new_client",e)},expression:"create_task_data.new_client"}})],1),e(l.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(v.Z,{attrs:{items:t.task_type_select,label:t.translate("Type")},model:{value:t.create_task_data.type,callback:function(e){t.$set(t.create_task_data,"type",e)},expression:"create_task_data.type"}})],1),e(l.Z,{attrs:{cols:"12",sm:"12",md:"12"}},[e(l.Z,[e(r.Z,[e("div",{staticStyle:{width:"50%"}},[e(k.Z,{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b.Z,t._g({attrs:{label:t.translate("Date"),"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.create_task_data.date,callback:function(e){t.$set(t.create_task_data,"date",e)},expression:"create_task_data.date"}},a))]}}]),model:{value:t.datepickermenu,callback:function(e){t.datepickermenu=e},expression:"datepickermenu"}},[e(m.Z,{attrs:{"no-title":"",scrollable:""},on:{input:function(e){t.datepickermenu=!1}},model:{value:t.create_task_data.date,callback:function(e){t.$set(t.create_task_data,"date",e)},expression:"create_task_data.date"}})],1)],1),e("div",{staticStyle:{width:"50%",padding:"0 10px"}},[e(_.Z,{ref:"formSchedule",staticStyle:{display:"flex",gap:"10px"}},[e(b.Z,{staticStyle:{width:"50%"},attrs:{label:t.translate("Hour"),type:"number",rules:t.hourRules},model:{value:t.hour,callback:function(e){t.hour=e},expression:"hour"}}),e(b.Z,{staticStyle:{width:"50%"},attrs:{label:t.translate("Minutes"),type:"number",rules:t.minuteRules},model:{value:t.minute,callback:function(e){t.minute=e},expression:"minute"}})],1)],1)])],1)],1),e(l.Z,{attrs:{cols:"12",sm:"12",md:"12"}},[e(v.Z,{attrs:{items:t.canton_select,label:t.translate("Place")},model:{value:t.create_task_data.place_id,callback:function(e){t.$set(t.create_task_data,"place_id",e)},expression:"create_task_data.place_id"}})],1),t.isAdmin?[e(l.Z,{attrs:{cols:"12",sm:"12",md:"12"}},[e(v.Z,{attrs:{items:t.get_agents_list,label:t.translate("Agents List")},model:{value:t.create_task_data.agent_id,callback:function(e){t.$set(t.create_task_data,"agent_id",e)},expression:"create_task_data.agent_id"}})],1)]:t._e(),e(l.Z,{attrs:{cols:"12",sm:"12",md:"12"}},[e(b.Z,{attrs:{label:t.translate("Task Name"),counter:"50",maxlength:"50"},model:{value:t.create_task_data.name,callback:function(e){t.$set(t.create_task_data,"name",e)},expression:"create_task_data.name"}})],1),e(l.Z,{attrs:{cols:"12",sm:"12",md:"12"}},[e(Z.Z,{attrs:{label:t.translate("Note")},model:{value:t.create_task_data.note,callback:function(e){t.$set(t.create_task_data,"note",e)},expression:"create_task_data.note"}})],1),e(l.Z,{attrs:{cols:"12",sm:"12",md:"12"}},[e("UploadTaskFiles")],1)],2)],1)],1),e(h.h7,[e(C.Z),e(d.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" "+t._s(t.translate("Cancel"))+" ")]),e(d.Z,{directives:[{name:"show",rawName:"v-show",value:t.isCreateMode,expression:"isCreateMode"}],attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" "+t._s(t.translate("Create"))+" ")]),e(d.Z,{directives:[{name:"show",rawName:"v-show",value:!t.isCreateMode,expression:"!isCreateMode"}],attrs:{color:"blue darken-1",text:""},on:{click:t.update}},[t._v(" "+t._s(t.translate("Update"))+" ")])],1)],1)],1),e(g.Z,{attrs:{"max-width":"550px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(u.Z,[e(r.Z,{staticStyle:{padding:"24px"},attrs:{"no-gutters":"","no-wrap":""}},[e("img",{staticStyle:{width:"56px",height:"56px"},attrs:{src:a(8952)}}),e("div",{staticStyle:{"margin-left":"16px"}},[e(h.EB,{staticClass:"text-h5 p-0"},[t._v(t._s(t.translate("Delete")))]),e(h.ZB,{staticClass:"p-0",staticStyle:{"margin-top":"4px"}},[t._v(t._s(t.translate("Are you sure you want to delete this item?")))])],1)]),e(h.h7,{staticClass:"justify-end"},[e("button",{staticClass:"btn btn-cancel",class:{"btn-dark":t.$vuetify.theme.dark},on:{click:t.closeDelete}},[t._v(t._s(t.translate("Cancel")))]),e("button",{staticClass:"btn btn-decline",attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.deleteTaskModalConfirm()}}},[t._v(t._s(t.translate("Confirm")))])])],1)],1)],1)]},proxy:!0},{key:"item.date",fn:function({item:a}){return[e("p",{staticClass:"mt-4"},[t._v(t._s(t._f("moment")(a.date,"DD[.]MM[.]YYYY h:mm a")))])]}},{key:"item.actions",fn:function({item:a}){return[e("div",{staticClass:"d-flex"},[e(d.Z,{attrs:{icon:""},on:{click:function(e){return t.editTask(a)}}},[e("svg",{attrs:{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.78486e-06 22.1066C0.00104677 22.6084 0.20068 23.0895 0.555672 23.4443C0.910482 23.7993 1.39158 23.9989 1.89343 24H20.2404C20.7423 23.9993 21.2234 23.7995 21.5784 23.4447C21.9334 23.0897 22.133 22.6086 22.1337 22.1066V9.37598C22.1377 9.2708 22.0986 9.16873 22.0257 9.09313C21.9527 9.01736 21.8522 8.97463 21.7471 8.97463C21.6419 8.97463 21.5414 9.01736 21.4684 9.09313C21.3955 9.16873 21.3564 9.2708 21.3604 9.37598V22.1066C21.3604 22.4036 21.2424 22.6885 21.0324 22.8986C20.8222 23.1086 20.5375 23.2265 20.2404 23.2265H1.89343C1.5964 23.2265 1.31146 23.1086 1.10145 22.8986C0.891434 22.6885 0.773455 22.4036 0.773455 22.1066V3.75956C0.773455 3.46253 0.891439 3.17777 1.10145 2.96759C1.31147 2.75757 1.5964 2.63959 1.89343 2.63959H14.6249C14.8306 2.62887 14.9918 2.45899 14.9918 2.25295C14.9918 2.04691 14.8306 1.87703 14.6249 1.8663H1.89343C1.39157 1.86734 0.910663 2.06715 0.55584 2.42197C0.200857 2.77678 0.00106288 3.25787 0 3.75955L8.78486e-06 22.1066ZM23.7739 3.44778L22.9902 4.23161L19.7686 1.00959L20.5529 0.225587H20.5528C20.6981 0.0811373 20.8946 0 21.0994 0C21.3044 0 21.501 0.0811329 21.6461 0.225587L23.7734 2.3536V2.35377C23.9184 2.49874 23.9997 2.69543 23.9997 2.90044C23.9997 3.10545 23.9184 3.30214 23.7734 3.44712L23.7739 3.44778ZM6.30331 14.7014L9.29473 17.693L5.39681 18.5679L6.30348 14.7011L6.30331 14.7014ZM18.8926 1.88536L19.221 1.55753L22.4432 4.77885L22.1148 5.10702L18.8926 1.88536ZM6.73776 14.0411L18.347 2.43274L19.6846 3.77032L8.0749 15.3783L6.73776 14.0411ZM8.62201 15.9264L20.2304 4.31757L21.568 5.65462L9.95916 17.2626L8.6221 15.9263L8.62201 15.9264Z",fill:"black"}})])]),e(d.Z,{attrs:{icon:""},on:{click:function(e){return t.deleteTaskModal(a)}}},[e("svg",{attrs:{width:"18",height:"18",viewBox:"0 0 18 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M14.9143 1.88238H12.2915C12.1722 1.35116 11.8564 0.873905 11.3973 0.531046C10.9383 0.188187 10.364 0.000685718 9.77139 0H8.22867C7.63609 0.000669646 7.06177 0.18817 6.60272 0.531046C6.14368 0.873905 5.8279 1.35121 5.7086 1.88238H3.08572C2.26753 1.88322 1.48319 2.18105 0.904706 2.71039C0.326362 3.23959 0.000889905 3.95728 0 4.70591C0 4.83063 0.054153 4.95033 0.150572 5.03856C0.246991 5.12695 0.377807 5.17651 0.514291 5.17651H1.04196L1.05586 21.6423C1.0555 21.6438 1.0555 21.6455 1.05586 21.647V21.6522V22.1439V22.167C1.08294 22.6615 1.31658 23.1276 1.70868 23.4688C2.10094 23.81 2.62125 24.0001 3.16246 24H14.8366C15.3774 23.9998 15.8976 23.8097 16.2895 23.4685C16.6814 23.1273 16.915 22.6614 16.9421 22.167V22.1439V21.6527C16.9423 21.6509 16.9423 21.6489 16.9421 21.6471C16.9423 21.6454 16.9423 21.6435 16.9421 21.6419L16.958 5.17649H17.4857C17.6222 5.17649 17.753 5.12694 17.8494 5.03854C17.9458 4.95031 18 4.83061 18 4.70589C17.9991 3.95722 17.6736 3.23953 17.0953 2.71037C16.5168 2.18099 15.7324 1.88318 14.9143 1.88236L14.9143 1.88238ZM8.22881 0.941191H9.77168H9.77149C10.0906 0.941191 10.4018 1.03176 10.6623 1.20034C10.9227 1.36893 11.1197 1.60716 11.226 1.88238H6.77429C6.88059 1.60715 7.07764 1.36895 7.33798 1.20034C7.59851 1.03176 7.90972 0.941191 8.22882 0.941191H8.22881ZM3.0861 2.82357H14.9148C15.3707 2.82407 15.8137 2.96303 16.1741 3.21849C16.5345 3.47396 16.7921 3.83157 16.9067 4.23537H1.09449C1.20902 3.83157 1.46663 3.47397 1.82707 3.21849C2.1875 2.96303 2.63042 2.82407 3.08638 2.82357H3.0861ZM15.9167 21.1764H2.08238L2.07049 7.05874H15.9287L15.9167 21.1764ZM14.8366 23.0588H3.16249C2.88696 23.0593 2.62166 22.9633 2.42096 22.7907C2.22026 22.6181 2.09914 22.3819 2.08249 22.1303V22.1176H15.9163V22.1303C15.8997 22.3816 15.7789 22.6176 15.5786 22.7901C15.3782 22.9627 15.1135 23.0588 14.8383 23.0588L14.8366 23.0588ZM15.9274 6.11768H2.07207V5.17648H15.9302L15.9274 6.11768Z",fill:"black"}}),e("path",{attrs:{d:"M4.02841 20.2356C4.1649 20.2356 4.29571 20.1861 4.39213 20.0978C4.48855 20.0096 4.5427 19.8899 4.5427 19.765V8.47082C4.5427 8.21083 4.31254 8.00024 4.02843 8.00024C3.74448 8.00024 3.51416 8.21085 3.51416 8.47082V19.765C3.51416 19.8899 3.56831 20.0096 3.66492 20.0978C3.76134 20.1861 3.89215 20.2356 4.02846 20.2356H4.02841Z",fill:"black"}}),e("path",{attrs:{d:"M6.51474 20.2356C6.65104 20.2356 6.78185 20.1861 6.87827 20.0978C6.97469 20.0096 7.02903 19.8899 7.02903 19.765V8.47082C7.02903 8.21083 6.79869 8.00024 6.51476 8.00024C6.23063 8.00024 6.00049 8.21085 6.00049 8.47082V19.765C6.00049 20.025 6.23065 20.2356 6.51476 20.2356L6.51474 20.2356Z",fill:"black"}}),e("path",{attrs:{d:"M9.00009 20.2356C9.13658 20.2356 9.26739 20.1861 9.36381 20.0978C9.46023 20.0096 9.51438 19.8899 9.51438 19.765V8.47082C9.51438 8.21083 9.28404 8.00024 9.00011 8.00024C8.71619 8.00024 8.48584 8.21085 8.48584 8.47082V19.765C8.48584 19.8899 8.53999 20.0096 8.63641 20.0978C8.73283 20.1861 8.86365 20.2356 9.00013 20.2356H9.00009Z",fill:"black"}}),e("path",{attrs:{d:"M11.4859 20.2356C11.6224 20.2356 11.7532 20.1861 11.8497 20.0978C11.9461 20.0096 12.0002 19.8899 12.0002 19.765V8.47082C12.0002 8.21083 11.7701 8.00024 11.486 8.00024C11.202 8.00024 10.9717 8.21085 10.9717 8.47082V19.765C10.9717 19.8899 11.026 20.0096 11.1224 20.0978C11.2189 20.1861 11.3497 20.2356 11.486 20.2356H11.4859Z",fill:"black"}}),e("path",{attrs:{d:"M13.9718 20.2356C14.1081 20.2356 14.2389 20.1861 14.3353 20.0978C14.4319 20.0096 14.4861 19.8899 14.4861 19.765V8.47082C14.4861 8.21083 14.2557 8.00024 13.9718 8.00024C13.6877 8.00024 13.4575 8.21085 13.4575 8.47082V19.765C13.4575 19.8899 13.5117 20.0096 13.6081 20.0978C13.7045 20.1861 13.8353 20.2356 13.9718 20.2356H13.9718Z",fill:"black"}})])])],1)]}}],null,!0)})],1)],1)},T=[],S=(a(7658),a(271)),$=a(1302),V=function(){var t=this,e=t._self._c;return e("div",[t.currentFile?e("div",[e("div",[e($.Z,{attrs:{intermediate:"","buffer-value":t.progress,color:"primary"},model:{value:t.progress,callback:function(e){t.progress=e},expression:"progress"}})],1)]):t._e(),e(r.Z,{attrs:{"no-gutters":"",justify:"center",align:"center"}},[e(l.Z,{attrs:{cols:"8"}},[e(S.Z,{attrs:{"show-size":"","small-chips":"",color:"primary",label:t.translate("Attachment")},on:{change:t.selectFile}})],1),e(l.Z,{attrs:{cols:"4"}},[e(d.Z,{attrs:{color:"primary",dark:"",small:""},on:{click:t.uploadTaskAttachment}},[t._v(" "+t._s(t.translate("Upload"))+" "),e(f.Z,{attrs:{right:"",dark:""}},[t._v("mdi-cloud-upload")])],1)],1)],1),e("SnackBar",{ref:"snackbar",attrs:{data:t.snackbar}})],1)},L=[],I=a(9669),D=a.n(I);class H{uploadCustomerDocument(t,e){let a=new FormData;return a.append("document",t.file),a.append("customer_id",t.customer_id),a.append("category_id",t.category_id),D().post("/customer_document",a,{onUploadProgress:e})}getFiles(t=1){let e=new FormData;return e.append("customer_id",t),D().get("/customer_document",e)}uploadTaskAttachment(t,e){let a=new FormData;return a.append("attachment",t),a.append("customer_id",1),a.append("date","03-03-2022"),a.append("name","dummy_attachment"),a.append("place_id",1),a.append("type",1),D().post("/task",a,{onUploadProgress:e})}}var M=new H,B=a(4069),z=a.t(B,2),A=a(8209),N={name:"UploadFiles",data(){return{currentFile:void 0,progress:0,snackbar:{show:!1,message:null,color:null},fileInfos:[],category_id:1,customer_id:1}},methods:{translate(t){let e=null;return B.forEach(((a,s)=>{a.english.toLowerCase()==t.toLowerCase()&&(e=s)})),null===e?t:"german"==this.$store.state.language?z[e].german:z[e].english},selectFile(t){this.progress=0,this.currentFile=t},uploadTaskAttachment(){if(!this.currentFile)return this.snackbar={message:"Please select a file",error:!0},void this.$refs.snackbar.toggleSnackbar(!0);this.snackbar={message:"",color:"",show:!1,error:!1},this.$refs.snackbar.toggleSnackbar(!1),M.uploadTaskAttachment(this.currentFile,(t=>{this.progress=Math.round(100*t.loaded/t.total)})).then((t=>(this.snackbar={message:t.data.message,error:!0},this.$refs.snackbar.toggleSnackbar(!0),M.getFiles(this.$router.currentRoute.params)))).then((t=>{this.fileInfos=t.data})).catch((t=>{this.progress=0,console.log(t),this.currentFile=null}))}},mounted(){M.getFiles(this.$router.currentRoute.params).then((t=>{this.fileInfos=t.data}))},components:{SnackBar:A.Z}},F=N,E=a(3736),P=(0,E.Z)(F,V,L,!1,null,null,null),R=P.exports,U={data(){return{calendar_date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),calendar_menu:!1,lead_calendar:null,datepickermenu:!1,hour:null,minute:null,hourRules:[t=>""!=t||"Field is required!",t=>t>=0||"0 is the minimum",t=>t<25||"Value should be smaller than 24"],minuteRules:[t=>""!=t||"Field is required!",t=>t>=0||"0 is the minimum",t=>t<60||"Value should be smaller than 60"],isCreateMode:!0,client_type:"actual",snackbar:{show:!1,message:null,color:null},isAdmin:!1,items:[],status:"",type:"",activePicker:null,provisionsanfrag:"",dialog:!1,dialogDelete:!1,search_string:"",loading:!0,headers:[{text:"#",align:"start",value:"id"},{text:this.translate("Date"),value:"date",width:"180px"},{text:this.translate("Task Name"),value:"name"},{text:this.translate("Note"),value:"note"},{text:this.translate("Actions"),value:"actions"}],data:[],options:{},totalTaskTable:0,create_task_data:{customer_id:"",type:"",name:"",date:"",place_id:"",note:"",agent_id:"",new_client:""},get_task_data:[],customer_list_select:[],canton_select:[],task_type_select:[],deleteTaskId:0,updateCustomerId:0,tasks:[],editedIndex:-1,editedItem:{customer_id:"",type:"",name:"",date:"",place_id:"",note:""},defaultItem:{customer_id:"1",type:"",name:"",date:"",place_id:"",note:""},get_agents_list:[],showCompleted:"",start_date_filter:"",end_date_filter:""}},computed:{formTitle(){return!0===this.isCreateMode?"Add Task":"Edit Task"},formated_date(){if(!this.calendar_date)return null;const[t,e,a]=this.calendar_date.split("-");return`${a}.${e}.${t}`}},watch:{client_type(t){"actual"!=t?this.create_task_data.customer_id=0:this.create_task_data.new_client=""},hour(t){1===t.length&&(this.hour="0"+t)},dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()},options:{handler(){this.getTasksDatatable()},deep:!0},search_string:{handler(){this.getTasksDatatable()},deep:!0},status:{handler(){this.getTasksDatatable()},deep:!0},showCompleted(t){this.status=t?2:"",this.getTasksDatatable()},calendar_date(t){let e=t.toString().split(",");this.start_date_filter=e[0],this.end_date_filter=e[1],this.getTasksDatatable()},menu(t){t&&setTimeout((()=>this.activePicker="YEAR"))}},created(){this.getTaskTypes()},mounted(){this.getTasksDatatable(),this.getCantonSelect(),this.getCustomerList(),this.getAgentsList(),this.$helperPlugin.ifAdmin()&&(this.isAdmin=!0)},methods:{translate(t){let e=null;return B.forEach(((a,s)=>{a.english.toLowerCase()==t.toLowerCase()&&(e=s)})),null===e?t:"german"==this.$store.state.language?z[e].german:z[e].english},getAgentsList(){D().get("/admin/agent").then((t=>{for(let e=0;t.data.length>0;e++)this.get_agents_list.push({text:t.data[e].first_name+" "+t.data[e].last_name,value:t.data[e].id})})).catch((t=>{console.log(t)}))},getCantonSelect(){D().get("/canton").then((t=>{for(let e=0;t.data.length>0;e++)this.canton_select.push({text:t.data[e].name,value:t.data[e].id})})).catch((t=>{console.log(t)}))},getCustomerList(){D().get("/customer").then((t=>{for(let e=0;t.data.length>0;e++)this.customer_list_select.push({text:t.data[e].first_name+" "+t.data[e].last_name,value:t.data[e].id})})).catch((t=>{console.log(t)}))},saveDate(t){this.$refs.menu.save(t)},getTasksDatatable(){this.loading=!0;const{sortBy:t,sortDesc:e,page:a,itemsPerPage:s}=this.options;let i;i="asc",e[0]&&(i="desc"),D().get("/task/datatable?term="+this.search_string+"&type="+this.status+"&start_date="+this.start_date_filter+"&end_date="+this.end_date_filter,{params:{sort_by:t[0],sort:i,page:a,per_page:s}}).then((t=>{this.tasks=t.data.data,this.totalTaskTable=t.data.total,this.loading=!1,this.$nextTick((()=>{const t=this.$el.querySelector(".v-data-footer__pagination"),e=t.innerHTML.replace("of",this.translate("of"));t.innerHTML=e}))})).catch((t=>{console.log(t)}))},createTask(){const{customer_id:t,type:e,name:a,date:s,place_id:i,note:l,agent_id:n,new_client:r}=this.create_task_data,o=parseInt(this.hour,10),c=parseInt(this.minute,10),d=new Date(`${s}T00:00:00Z`);d.setUTCHours(o),d.setUTCMinutes(c),D().post("/task",{customer_id:t,type:e,name:a,date:d,place_id:i,note:l,agent_id:n,new_client:r}).then((()=>{this.create_task_data={},this.snackbar={message:"Data updated successfully",error:!1},this.$refs.snackbar.toggleSnackbar(!0)})).catch((t=>{console.log(t)}))},getTask(t){D().get("/task/"+t).then((t=>{this.create_task_data={},this.get_task_data.push(t.data.data),this.create_task_data.customer_id=parseInt(t.data.data.customer_id),this.create_task_data.type=parseInt(t.data.data.type),this.create_task_data.name=t.data.data.name,this.create_task_data.date=t.data.data.date,this.create_task_data.place_id=parseInt(t.data.data.place_id),this.create_task_data.agent_id=parseInt(t.data.data.agent_id),this.create_task_data.note=t.data.data.note,this.create_task_data.created_by=t.data.data.created_by,this.create_task_data.new_client=t.data.data.new_client})).catch((t=>{console.log(t)}))},updateTask(t){D().put("/task/"+t,this.create_task_data).then((t=>{this.snackbar={message:t.data.message,color:"success",error:!1},this.$refs.snackbar.toggleSnackbar(!0)})).catch((t=>{console.log(t)}))},deleteTask(t){D()["delete"]("/task/"+t).then((t=>{this.snackbar={message:t.data.message,color:"success",error:!1},this.$refs.snackbar.toggleSnackbar(!0)})).catch((t=>{console.log(t)}))},updateTaskStatus(t){D().put("/task/complete/"+t,{complete:"1"}).then((t=>{alert(t.data.message)})).catch((t=>{console.log(t)}))},getTaskTypes(){D().get("/tasktype").then((t=>{for(let e=0;t.data.length>0;e++)this.task_type_select.push({text:this.translate(t.data[e].name),value:t.data[e].id})})).catch((t=>{console.log(t)}))},openDialog(){this.create_task_data=this.defaultItem,this.isCreateMode=!0,this.dialog=!0},editTask(t){this.isCreateMode=!1,this.getTask(t.id),this.updateTaskId=t.id,this.dialog=!0},deleteTaskModal(t){this.deleteTaskId=t.id,this.dialogDelete=!0},deleteTaskModalConfirm(){this.closeDelete(),this.deleteTask(this.deleteTaskId),this.getTasksDatatable()},close(){this.dialog=!1},closeDelete(){this.dialogDelete=!1},save(){this.close(),this.createTask(),this.getTasksDatatable()},update(){this.close(),this.updateTask(this.updateTaskId),this.getTasksDatatable()}},components:{UploadTaskFiles:R,SnackBar:A.Z}},j=U,G=(0,E.Z)(j,x,T,!1,null,null,null),q=G.exports,O=a(6563),Y=a(4674),K={name:"TasksComponent",data(){return{title:"Tasks"}},components:{TasksTable:q,NavbarControl:O.Z,UserControl:Y.Z},methods:{translate(t){let e=null;return B.forEach(((a,s)=>{a.english.toLowerCase()==t.toLowerCase()&&(e=s)})),null===e?t:"german"==this.$store.state.language?z[e].german:z[e].english}}},X=K,J=(0,E.Z)(X,o,c,!1,null,"77979dec",null),Q=J.exports,W={name:"TaskView",components:{Tasks:Q}},tt=W,et=(0,E.Z)(tt,s,i,!1,null,null,null),at=et.exports},271:function(t,e,a){a.d(e,{Z:function(){return c}});a(7658);var s=a(5251),i=s.Z,l=a(4944),n=a(1050),r=a(6596),o=a(2653),c=i.extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:t=>"boolean"===typeof t||[1e3,1024].includes(t)},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:t=>(0,n.TI)(t).every((t=>null!=t&&"object"===typeof t))}},computed:{classes(){return{...i.options.computed.classes.call(this),"v-file-input":!0}},computedCounterValue(){const t=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,t);const e=this.internalArrayValue.reduce(((t,{size:e=0})=>t+e),0);return this.$vuetify.lang.t(this.counterSizeString,t,(0,n.XE)(e,1024===this.base))},internalArrayValue(){return(0,n.TI)(this.internalValue)},internalValue:{get(){return this.lazyValue},set(t){this.lazyValue=t,this.$emit("change",this.lazyValue)}},isDirty(){return this.internalArrayValue.length>0},isLabelActive(){return this.isDirty},text(){return this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?this.internalArrayValue.map((t=>{const{name:e="",size:a=0}=t,s=this.truncateText(e);return this.showSize?`${s} (${(0,n.XE)(a,1024===this.base)})`:s})):[this.placeholder]},base(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips(){return this.chips||this.smallChips}},watch:{readonly:{handler(t){!0===t&&(0,r.N6)("readonly is not supported on <v-file-input>",this)},immediate:!0},value(t){const e=this.multiple?t:t?[t]:[];(0,n.vZ)(e,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips(){return this.isDirty?this.text.map(((t,e)=>this.$createElement(l.Z,{props:{small:this.smallChips},on:{"click:close":()=>{const t=this.internalValue;t.splice(e,1),this.internalValue=t}}},[t]))):[]},genControl(){const t=i.options.methods.genControl.call(this);return this.hideInput&&(t.data.style=(0,o.y0)(t.data.style,{display:"none"})),t},genInput(){const t=i.options.methods.genInput.call(this);return t.data.attrs.multiple=this.multiple,delete t.data.domProps.value,delete t.data.on.input,t.data.on.change=this.onInput,[this.genSelections(),t]},genPrependSlot(){if(!this.prependIcon)return null;const t=this.genIcon("prepend",(()=>{this.$refs.input.click()}));return this.genSlot("prepend","outer",[t])},genSelectionText(){const t=this.text.length;return t<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,t)]},genSelections(){const t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach(((e,a)=>{this.$scopedSlots.selection&&t.push(this.$scopedSlots.selection({text:this.text[a],file:e,index:a}))})):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot(){const t=i.options.methods.genTextFieldSlot.call(this);return t.data.on={...t.data.on||{},click:t=>{t.target&&"LABEL"===t.target.nodeName||this.$refs.input.click()}},t},onInput(t){const e=[...t.target.files||[]];this.internalValue=this.multiple?e:e[0],this.initialValue=this.internalValue},onKeyDown(t){this.$emit("keydown",t)},truncateText(t){if(t.length<Number(this.truncateLength))return t;const e=Math.floor((Number(this.truncateLength)-1)/2);return`${t.slice(0,e)}â€¦${t.slice(t.length-e)}`}}})},6904:function(t,e,a){a(7658);var s=a(4987),i=a(4609),l=a(380);e["Z"]=(0,s.Z)(i.Z,(0,l.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",(e=>{this.$set(this.errorBag,t._uid,e)}),{immediate:!0}),a={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?a.shouldValidate=t.$watch("shouldValidate",(s=>{s&&(this.errorBag.hasOwnProperty(t._uid)||(a.valid=e(t)))})):a.valid=e(t),a},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find((e=>e._uid===t._uid));if(!e)return;const a=this.watchers.find((t=>t._uid===e._uid));a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==e._uid)),this.inputs=this.inputs.filter((t=>t._uid!==e._uid)),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},5617:function(t,e,a){a.d(e,{Z:function(){return n}});var s=a(5251),i=a(4987);const l=(0,i.Z)(s.Z);var n=l.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...s.Z.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick((()=>{var e;t?this.calculateInputHeight():null===(e=this.$refs.input)||void 0===e||e.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(a,e)+"px"},genInput(){const t=s.Z.options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){s.Z.options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})}}]);
//# sourceMappingURL=tasks.57a10efa.js.map