"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[191],{4674:function(t,e,a){a.d(e,{Z:function(){return b}});var s=a(8819),l=a(7179),n=a(4437),i=a(5057),r=a(2469),o=a(248),d=a(1908),c=a(1495),u=function(){var t=this,e=t._self._c;return e(n.Z,{attrs:{cols:"12",md:"12",lg:"12"}},[e("div",{staticClass:"second-sidebar-header",staticStyle:{padding:"0"}},[e(i.Z,{directives:[{name:"show",rawName:"v-show",value:t.isMobile,expression:"isMobile"}],on:{click:function(e){return t.$store.dispatch("toggleSecondVariant")}}},[t._v("mdi-arrow-collapse-right")]),e("div",[e("button",{staticClass:"border-blue",staticStyle:{overflow:"hidden",cursor:"pointer"},on:{click:function(e){return t.$store.dispatch("toggleLanguage")}}},["german"==t.$store.state.language?e("div",{staticClass:"center"},[e("img",{staticStyle:{width:"24px",height:"24px","object-fit":"cover","border-radius":"999px"},attrs:{src:a(1635),alt:"german language"}}),t._v(" CH ")]):e("div",{staticClass:"center"},[e("img",{staticStyle:{width:"24px",height:"24px","border-radius":"999px","object-fit":"cover"},attrs:{src:a(5257),alt:"german language"}}),t._v(" EN ")])]),e(c.Z,{attrs:{"offset-y":"",left:"",bottom:"",transition:"slide-x-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:l,attrs:n}){return[e(s.Z,t._g(t._b({attrs:{size:"35"}},"v-avatar",n,!1),l),[t.$store.state.profileImage.img_path?e("img",{staticClass:"pa-1",staticStyle:{"object-fit":"contain"},attrs:{src:t.$store.state.profileImage.img_path}}):e(r.Z,{attrs:{src:a(6164)}})],1)]}}])},[e(o.Z,{staticClass:"p-0"},[e(d.Z,{staticClass:"p-0"},[e(l.Z,{staticStyle:{background:"transparent"},on:{click:t.goToProfile}},[t._v(" "+t._s(t.translate("Profile"))+" ")])],1),e(d.Z,{staticClass:"p-0"},[e(l.Z,{staticStyle:{background:"transparent"},on:{click:t.exitApp}},[t._v(t._s(t.translate("Log out")))])],1)],1)],1)],1)],1)])},_=[],h=(a(7658),a(4069)),p=a.t(h,2),m={name:"UserControl",methods:{translate(t){let e=null;return h.forEach(((a,s)=>{a.english.toLowerCase()==t.toLowerCase()&&(e=s)})),null===e?t:"german"==this.$store.state.language?p[e].german:p[e].english},goToProfile(){this.$router.push("/profile")},exitApp(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.$router.push("/login")}}},g=m,f=a(3736),v=(0,f.Z)(g,u,_,!1,null,null,null),b=v.exports},8800:function(t,e,a){a.r(e),a.d(e,{default:function(){return Q}});var s=function(){var t=this,e=t._self._c;return e("Leads")},l=[],n=a(4437),i=a(6035),r=a(5294),o=function(){var t=this,e=t._self._c;return e(i.Z,[e(r.Z,{staticStyle:{"margin-left":"12px"}},[e(n.Z,{staticClass:"d-flex justify-start",attrs:{cols:"12",md:"8"}},[e("NavbarControl"),e("h2",{staticStyle:{display:"flex","align-items":"center"}},[t._v(t._s(t.title))])],1),e(n.Z,{attrs:{cols:"12",md:"4"}},[e("UserControl")],1)],1),e(r.Z,[e(n.Z,{attrs:{cols:"12",md:"12",lg:"12"}},[e(r.Z,[e(n.Z,{attrs:{cols:"12",md:"12",lg:"12"}},[e("LeadsTable")],1)],1)],1)],1)],1)},d=[],c=a(7179),u=a(3385),_=a(5223),h=a(4944),p=a(7652),m=a(7145),g=a(9789),f=a(271),v=a(5057),b=a(248),x=a(1908),y=a(4831),k=a(2776),C=a(1495),Z=a(9207),w=a(2564),S=a(2927),L=a(5234),D=a(5251),$=a(5838),I=(a(7658),function(){var t=this,e=t._self._c;return e(r.Z,[e(g.Z,{attrs:{"max-width":"550px"},model:{value:t.dialogAcceptLead,callback:function(e){t.dialogAcceptLead=e},expression:"dialogAcceptLead"}},[e(u.Z,[e(r.Z,{staticStyle:{padding:"24px"},attrs:{"no-gutters":"","no-wrap":""}},[e("svg",{attrs:{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("rect",{attrs:{x:"4",y:"4",width:"48",height:"48",rx:"24",fill:"#D1FADF"}}),e("path",{attrs:{d:"M23.5 28L26.5 31L32.5 25M38 28C38 33.5228 33.5228 38 28 38C22.4772 38 18 33.5228 18 28C18 22.4772 22.4772 18 28 18C33.5228 18 38 22.4772 38 28Z",stroke:"#039855","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),e("rect",{attrs:{x:"4",y:"4",width:"48",height:"48",rx:"24",stroke:"#ECFDF3","stroke-width":"8"}})]),e("div",{staticStyle:{"margin-left":"16px"}},[e(_.EB,{staticClass:"text-h5 p-0"},[t._v(t._s(t.translate("Add customer")))]),e(_.ZB,{staticClass:"p-0",staticStyle:{"margin-top":"4px"}},[t._v(t._s(t.translate("Are you sure you want this lead to be your customer?")))])],1)]),e(_.h7,{staticClass:"justify-end"},[e("button",{staticClass:"btn btn-cancel",class:{"btn-dark":t.$vuetify.theme.dark},on:{click:function(e){t.dialogAcceptLead=!t.dialogAcceptLead}}},[t._v(t._s(t.translate("Cancel")))]),e("button",{staticClass:"btn btn-ok",attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.acceptLeadCustomer()}}},[t._v(t._s(t.translate("Confirm")))])])],1)],1),e(g.Z,{attrs:{"max-width":"550px"},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[e(u.Z,[e(r.Z,{staticStyle:{padding:"24px"},attrs:{"no-gutters":"","no-wrap":""}},[e("img",{staticStyle:{width:"56px",height:"56px"},attrs:{src:a(8952)}}),e("div",{staticStyle:{"margin-left":"16px"}},[e(_.EB,{staticClass:"text-h5 p-0"},[t._v(t._s(t.translate("Delete")))]),e(_.ZB,{staticClass:"p-0",staticStyle:{"margin-top":"4px"}},[t._v(t._s(t.translate("Are you sure you want to delete this item?")))])],1)]),e(_.h7,{staticClass:"justify-end"},[e("button",{staticClass:"btn btn-cancel",class:{"btn-dark":t.$vuetify.theme.dark},on:{click:function(e){t.deleteDialog=!1}}},[t._v(t._s(t.translate("Cancel")))]),e("button",{staticClass:"btn btn-decline",attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.declineLeadCustomer()}}},[t._v(t._s(t.translate("Confirm")))])])],1)],1),e(n.Z,{attrs:{cols:"12",xs:"12",sm:"12",md:"2",lg:"2"}},[e(b.Z,{staticClass:"status"},[e(k.Z,{attrs:{color:"primary"},model:{value:t.selectedStatus,callback:function(e){t.selectedStatus=e},expression:"selectedStatus"}},t._l(t.lead_status_data,(function(a,s){return e(x.Z,{key:s},[e(y.km,[e(y.V9,{domProps:{textContent:t._s(t.translate(a.text))}})],1)],1)})),1)],1)],1),e(n.Z,{attrs:{cols:"12",xs:"12",sm:"12",md:"10",lg:"10"}},[e("div",[e(r.Z,[e("SnackBar",{ref:"snackbar",attrs:{data:t.snackbar}}),e(n.Z,{attrs:{cols:"",xs:"12",xm:"12",md:"3",lg:"3"}},[e(D.Z,{attrs:{rounded:"",filled:"","background-color":t.$vuetify.theme.dark?"":"white",label:t.translate("Search"),"prepend-inner-icon":"mdi-magnify"},model:{value:t.search_string,callback:function(e){t.search_string=e},expression:"search_string"}})],1),e(n.Z,{attrs:{cols:"",xs:"12",xm:"12",md:"3",lg:"3"}},[e(C.Z,{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.lead_calendar,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.lead_calendar=e},"update:return-value":function(e){t.lead_calendar=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(D.Z,t._g(t._b({attrs:{label:t.translate("From"),"prepend-inner-icon":"mdi-calendar",readonly:"","background-color":t.$vuetify.theme.dark?"":"#fff",rounded:"",filled:""},model:{value:t.lead_calendar_needs_format,callback:function(e){t.lead_calendar_needs_format=e},expression:"lead_calendar_needs_format"}},"v-text-field",s,!1),a))]}}]),model:{value:t.lead_menu,callback:function(e){t.lead_menu=e},expression:"lead_menu"}},[e(m.Z,{attrs:{"no-title":"",scrollable:""},model:{value:t.lead_calendar,callback:function(e){t.lead_calendar=e},expression:"lead_calendar"}},[e(L.Z),e(c.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.lead_menu=!1}}},[t._v(" Cancel ")]),e(c.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.lead_calendar)}}},[t._v(" OK ")])],1)],1)],1),e(n.Z,{attrs:{cols:"",xs:"12",xm:"12",md:"3",lg:"3"}},[e(C.Z,{ref:"menu_to",attrs:{"close-on-content-click":!1,"return-value":t.lead_to_calendar,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.lead_to_calendar=e},"update:return-value":function(e){t.lead_to_calendar=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(D.Z,t._g(t._b({attrs:{label:t.translate("To"),"prepend-inner-icon":"mdi-calendar",readonly:"","background-color":t.$vuetify.theme.dark?"":"#fff",rounded:"",filled:""},model:{value:t.lead_to_calendar_needs_format,callback:function(e){t.lead_to_calendar_needs_format=e},expression:"lead_to_calendar_needs_format"}},"v-text-field",s,!1),a))]}}]),model:{value:t.lead_to_menu,callback:function(e){t.lead_to_menu=e},expression:"lead_to_menu"}},[e(m.Z,{attrs:{"no-title":"",scrollable:"",min:t.lead_calendar},model:{value:t.date_to,callback:function(e){t.date_to=e},expression:"date_to"}},[e(L.Z),e(c.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu_to=!1}}},[t._v(" Cancel ")]),e(c.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu_to.save(t.date_to)}}},[t._v(" OK ")])],1)],1)],1),e(n.Z,{attrs:{cols:"",xs:"12",xm:"12",md:"3",lg:"3"}},[e(S.Z,{attrs:{rounded:"",filled:"","background-color":t.$vuetify.theme.dark?"":"white",label:t.translate("Canton"),items:t.canton_select,"prepend-inner-icon":"mdi-map-outline"}})],1),e(n.Z,{staticClass:"mt-3 mb-3 d-flex justify-end",attrs:{cols:"",xs:"12",xm:"12",md:"12",lg:"12"}},[e(h.Z,{attrs:{label:"",color:"transparent"}},[t._v(t._s(t.translate("Total"))+": "+t._s(t.totalLeadsTable))])],1)],1),e("div",{staticClass:"d-flex justify-end"},[t.isAdmin?[e(c.Z,{staticClass:"mb-2",attrs:{color:"primary mb-2 ml-2 lead-buttons",dark:""},on:{click:t.downloadSampleList}},[e(v.Z,[t._v("mdi-tray-arrow-down")]),t._v(" "+t._s(t.translate("Download Sample List"))+" ")],1),e(c.Z,{staticClass:"mb-2",attrs:{color:"primary mb-2 ml-2 lead-buttons",dark:""},on:{click:t.openImportDialog}},[e(v.Z,[t._v("mdi-tray-arrow-up")]),t._v(" "+t._s(t.translate("Import"))+" "+t._s(t.translate("Leads"))+" ")],1)]:t._e(),e(c.Z,{staticClass:"mb-2",attrs:{color:"primary mb-2 ml-2 lead-buttons",dark:""},on:{click:t.openDialog}},[e(v.Z,[t._v("mdi-plus")]),t._v(" "+t._s(t.translate("New Lead"))+" ")],1)],2),e(p.Z,{ref:"dataTable",attrs:{headers:t.filteredHeaders,items:t.data,loading:t.loading,options:t.options,"server-items-length":t.totalLeadsTable,"footer-props":{"items-per-page-text":t.translate("Rows per page"),"items-per-page-all-text":t.translate("All")}},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"default",fn:function(){return[t._v(" aa")]},proxy:!0},{key:"no-data",fn:function(){return[t._v(" "+t._s(t.translate("No data available"))+" ")]},proxy:!0},{key:"loading",fn:function(){return[t._v(" "+t._s(t.translate("Loading items"))+"... ")]},proxy:!0},{key:"top",fn:function(){return[e($.Z,{attrs:{flat:""}},[e(L.Z),e(g.Z,{attrs:{"max-width":"500px"},model:{value:t.importLeadDialog,callback:function(e){t.importLeadDialog=e},expression:"importLeadDialog"}},[e(u.Z,[e(_.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.translate("Import Lead")))])]),e(_.ZB,[e(i.Z,[e(r.Z,[e(n.Z,{staticClass:"mt-5 mb-5",attrs:{cols:"12",xs:"12",sm:"12",md:"12",lg:"12"}},[e(f.Z,{attrs:{color:"primary accent-4",counter:"",label:t.translate("File input"),multiple:"",placeholder:"Select your CSV file","prepend-icon":"mdi-paperclip",outlined:"","show-size":1e3},scopedSlots:t._u([{key:"selection",fn:function({index:a,text:s}){return[a<2?e(h.Z,{attrs:{color:"primary",dark:"",label:"",small:""}},[t._v(" "+t._s(s)+" ")]):2===a?e("span",{staticClass:"text-overline grey--text text--darken-3 mx-2"},[t._v(" +"+t._s(t.files.length-2)+" File(s) ")]):t._e()]}}]),model:{value:t.files,callback:function(e){t.files=e},expression:"files"}})],1)],1)],1)],1),e(_.h7,[e(L.Z),e(c.Z,{attrs:{color:"secondary"},on:{click:t.close}},[t._v(" "+t._s(t.translate("Cancel"))+" ")]),e(c.Z,{directives:[{name:"show",rawName:"v-show",value:t.isCreateMode,expression:"isCreateMode"}],attrs:{color:"primary"},on:{click:t.uploadCSV}},[t._v(" "+t._s(t.translate("Import"))+" ")])],1)],1)],1),e(g.Z,{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(u.Z,[e(_.EB,[e("span",{staticClass:"text-h5"},[t._v(t._s(t.translate(t.formTitle)))])]),e(_.ZB,[e(i.Z,[e(r.Z,[e(n.Z,{attrs:{cols:"12",sm:"6",md:"12",lg:"12"}},[e(w.Z,{attrs:{row:""},model:{value:t.create_leads_data.salutation,callback:function(e){t.$set(t.create_leads_data,"salutation",e)},expression:"create_leads_data.salutation"}},[e(Z.Z,{attrs:{label:"Frau",value:"frau"}}),e(Z.Z,{attrs:{label:"Herr",value:"herr"}})],1)],1),e(n.Z,{attrs:{cols:"12",sm:"6",md:"6",lg:"6"}},[e(D.Z,{attrs:{label:t.translate("First Name")},model:{value:t.create_leads_data.first_name,callback:function(e){t.$set(t.create_leads_data,"first_name",e)},expression:"create_leads_data.first_name"}})],1),e(n.Z,{attrs:{cols:"12",sm:"6",md:"6",lg:"6"}},[e(D.Z,{attrs:{label:t.translate("Last Name")},model:{value:t.create_leads_data.last_name,callback:function(e){t.$set(t.create_leads_data,"last_name",e)},expression:"create_leads_data.last_name"}})],1),e(n.Z,{attrs:{cols:"12",sm:"6",md:"6",lg:"6"}},[e(D.Z,{attrs:{label:t.translate("Email")},model:{value:t.create_leads_data.email,callback:function(e){t.$set(t.create_leads_data,"email",e)},expression:"create_leads_data.email"}})],1),e(n.Z,{attrs:{cols:"12",sm:"6",md:"6",lg:"6"}},[e(D.Z,{attrs:{label:t.translate("Phone Nr.")},model:{value:t.create_leads_data.phone,callback:function(e){t.$set(t.create_leads_data,"phone",e)},expression:"create_leads_data.phone"}})],1),e(n.Z,{attrs:{cols:"12",sm:"6",md:"6",lg:"6"}},[e(C.Z,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(D.Z,t._g(t._b({attrs:{label:t.translate("Birthday"),readonly:""},model:{value:t.formated_date,callback:function(e){t.formated_date=e},expression:"formated_date"}},"v-text-field",s,!1),a))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[e(m.Z,{attrs:{"append-inner-icon":"mdi-calendar"},on:{input:function(e){t.menu2=!1}},model:{value:t.create_leads_data.birthday,callback:function(e){t.$set(t.create_leads_data,"birthday",e)},expression:"create_leads_data.birthday"}})],1)],1),e(n.Z,{attrs:{cols:"12",sm:"6"}},[e(D.Z,{attrs:{label:t.translate("Persons"),type:"number"},model:{value:t.create_leads_data.persons,callback:function(e){t.$set(t.create_leads_data,"persons",e)},expression:"create_leads_data.persons"}})],1),e(n.Z,{attrs:{cols:"12",sm:"6"}},[e(D.Z,{attrs:{label:t.translate("Street")+" Nr."},model:{value:t.create_leads_data.street_no,callback:function(e){t.$set(t.create_leads_data,"street_no",e)},expression:"create_leads_data.street_no"}})],1),e(n.Z,{attrs:{cols:"12",sm:"6"}},[e(D.Z,{attrs:{label:t.translate("Place")},model:{value:t.create_leads_data.place,callback:function(e){t.$set(t.create_leads_data,"place",e)},expression:"create_leads_data.place"}})],1),e(n.Z,{attrs:{cols:"12",sm:"6"}},[e(S.Z,{attrs:{label:t.translate("Canton"),items:t.canton_select},model:{value:t.create_leads_data.canton_id,callback:function(e){t.$set(t.create_leads_data,"canton_id",e)},expression:"create_leads_data.canton_id"}})],1),e(n.Z,{attrs:{cols:"12",sm:"6",md:"6",lg:"6"}},[e(S.Z,{attrs:{label:t.translate("Type"),items:t.client_types},model:{value:t.create_leads_data.client_type_id,callback:function(e){t.$set(t.create_leads_data,"client_type_id",e)},expression:"create_leads_data.client_type_id"}})],1),e(n.Z,{attrs:{cols:"12",sm:"6",md:"6",lg:"6"}},[e(S.Z,{attrs:{label:t.translate("Language"),items:t.lang_select},model:{value:t.create_leads_data.lang,callback:function(e){t.$set(t.create_leads_data,"lang",e)},expression:"create_leads_data.lang"}})],1),e(n.Z,{attrs:{cols:"12",sm:"6"}},[e(S.Z,{attrs:{label:t.translate("Source"),items:t.source_id},model:{value:t.create_leads_data.source_id,callback:function(e){t.$set(t.create_leads_data,"source_id",e)},expression:"create_leads_data.source_id"}})],1),e(n.Z,{attrs:{cols:"12"}},[e(S.Z,{attrs:{items:t.insurances_companies,label:t.translate("Actual Insurance")},model:{value:t.create_leads_data.company,callback:function(e){t.$set(t.create_leads_data,"company",e)},expression:"create_leads_data.company"}})],1),e(n.Z,[e(S.Z,{attrs:{items:t.insurances_companies,label:"KVG"},model:{value:t.create_leads_data.kvg,callback:function(e){t.$set(t.create_leads_data,"kvg",e)},expression:"create_leads_data.kvg"}})],1),e(n.Z,[e(S.Z,{attrs:{items:t.insurances_companies,label:"VVG"},model:{value:t.create_leads_data.vvg,callback:function(e){t.$set(t.create_leads_data,"vvg",e)},expression:"create_leads_data.vvg"}})],1)],1)],1)],1),e(_.h7,[e(L.Z),e(c.Z,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" "+t._s(t.translate("Cancel"))+" ")]),e(c.Z,{directives:[{name:"show",rawName:"v-show",value:t.isCreateMode,expression:"isCreateMode"}],attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" "+t._s(t.translate("Create lead"))+" ")]),e(c.Z,{directives:[{name:"show",rawName:"v-show",value:!t.isCreateMode,expression:"!isCreateMode"}],attrs:{color:"blue darken-1",text:""},on:{click:t.update}},[t._v(" "+t._s(t.translate("Update"))+" ")])],1)],1)],1),e(g.Z,{attrs:{"max-width":"550px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(u.Z,[e(r.Z,{staticStyle:{padding:"24px"},attrs:{"no-gutters":"","no-wrap":""}},[e("img",{staticStyle:{width:"56px",height:"56px"},attrs:{src:a(8952)}}),e("div",{staticStyle:{"margin-left":"16px"}},[e(_.EB,{staticClass:"text-h5 p-0"},[t._v(t._s(t.translate("Delete")))]),e(_.ZB,{staticClass:"p-0",staticStyle:{"margin-top":"4px"}},[t._v(t._s(t.translate("Are you sure you want to delete this item?")))])],1)]),e(_.h7,{staticClass:"justify-end"},[e("button",{staticClass:"btn btn-cancel",class:{"btn-dark":t.$vuetify.theme.dark},on:{click:t.closeDelete}},[t._v(t._s(t.translate("Cancel")))]),e("button",{staticClass:"btn btn-decline",attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.deleteLeadsModalConfirm()}}},[t._v(t._s(t.translate("Confirm")))])])],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[e("div",{staticClass:"d-flex"},[t.isAdmin?e(c.Z,{attrs:{icon:""},on:{click:function(e){return t.acceptLead(a)}}},[e("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 26 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M23.2854 3.54275L11.1711 14.5999L6.77125 9.79979C6.34276 9.3426 5.62849 9.3141 5.14257 9.71409C4.68538 10.1426 4.65688 10.8568 5.05687 11.3428L10.2283 16.9999C10.4569 17.257 10.7712 17.3714 11.0855 17.3714C11.3713 17.3714 11.6284 17.2857 11.857 17.0856L24.8284 5.22846C25.2856 4.79997 25.3141 4.08571 24.9141 3.59979C24.4856 3.1426 23.7713 3.1141 23.2856 3.54259L23.2854 3.54275Z",fill:"#1DD200"}}),e("path",{attrs:{d:"M11.9999 24C18.6285 24 23.9999 18.6286 23.9999 12C23.9999 11.4286 23.9714 10.8857 23.8857 10.3428C23.8 9.71428 23.2286 9.28576 22.6001 9.37147C21.9715 9.45717 21.543 10.0286 21.6287 10.6571C21.6859 11.1143 21.7144 11.5715 21.7144 12C21.7144 17.3428 17.343 21.7143 12.0001 21.7143C6.65724 21.7143 2.28581 17.3428 2.28581 12C2.28581 6.65713 6.65724 2.2857 12.0001 2.2857C14.2859 2.2857 16.5144 3.0857 18.2572 4.57147C18.7429 4.97146 19.4572 4.91427 19.8572 4.42857C20.2572 3.94288 20.2 3.22857 19.7143 2.82862C17.5716 0.999847 14.8287 0 12 0C5.37143 0 0 5.37143 0 12C0 18.6286 5.37143 24 12 24L11.9999 24Z",fill:"#1DD200"}})])]):t._e(),t.isAdmin?e(c.Z,{attrs:{icon:""},on:{click:function(e){return t.declineLead(a)}}},[e("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M20.4846 3.51416C18.2341 1.26392 15.1818 0 11.9995 0C8.81706 0 5.76502 1.26441 3.51441 3.5149C1.26416 5.76539 0 8.81749 0 12C0 15.1825 1.26416 18.2345 3.51441 20.4851C5.7649 22.7356 8.817 24 11.9995 24C15.182 24 18.2346 22.736 20.4846 20.4858C21.9815 19.0004 23.0592 17.1453 23.6076 15.1091C24.1562 13.0727 24.1562 10.9274 23.6076 8.89114C23.0592 6.85494 21.9815 4.99978 20.4846 3.51441V3.51416ZM16.0104 14.7942L16.0102 14.7944C16.1671 14.9582 16.2546 15.1761 16.2546 15.4028C16.2546 15.6298 16.1671 15.8477 16.0102 16.0115C15.8409 16.1645 15.6213 16.2499 15.3932 16.2516C15.1701 16.2497 14.9558 16.1641 14.7931 16.0115L11.9988 13.2171L9.20445 16.0115C9.04182 16.1641 8.82754 16.2497 8.6044 16.2516C8.37624 16.2499 8.15669 16.1645 7.98738 16.0115C7.83049 15.8477 7.74296 15.6298 7.74296 15.4028C7.74296 15.1761 7.83049 14.9582 7.98738 14.7944L10.7817 12.0001L7.98738 9.20571C7.65136 8.86969 7.65136 8.32463 7.98738 7.98863C8.3234 7.65263 8.86846 7.65261 9.20446 7.98863L11.9988 10.783L14.7932 7.98863C15.1292 7.65261 15.6742 7.65261 16.0102 7.98863C16.3462 8.32465 16.3463 8.86971 16.0102 9.20571L13.2159 12.0001L16.0104 14.7942Z",fill:"#D20000"}})])]):t._e()],1)]}},{key:"item.created_at",fn:function({item:a}){return[e("p",{staticClass:"mt-4"},[t._v(t._s(t._f("moment")(a.created_at,"DD[.]MM[.]YYYY")))])]}},{key:"item.scheduled",fn:function({item:a}){return[a.scheduled_at?e("p",[t._v(t._s(t._f("moment")(a.scheduled_at.scheduled_at,"DD.MM.YYYY HH:mm")))]):e("p",[t._v("No date")])]}},{key:"item.name_lastname",fn:function({item:a}){return[e("p",{staticClass:"mt-4",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.$router.push("/leadsdetails/"+a.id)}}},[t._v(t._s(a.first_name)+" "+t._s(a.last_name))])]}},{key:"item.agent",fn:function({item:a}){return[a.user?e("p",{staticClass:"mt-4"},[t._v(t._s(a.user.first_name)+" "+t._s(a.user.last_name))]):t._e()]}},{key:"item.first_name",fn:function({item:a}){return[e("span",{staticClass:"click",on:{click:function(e){return t.$router.push("/leadsdetails/"+a.id)}}},[t._v(t._s(a.first_name))])]}},{key:"item.last_name",fn:function({item:a}){return[e("span",{staticClass:"click",on:{click:function(e){return t.$router.push("/leadsdetails/"+a.id)}}},[t._v(t._s(a.last_name))])]}}],null,!0)})],1)])],1)}),A=[],V=a(144),T=a(4069),z=a.t(T,2),M=a(8209),B=a(9669),N=a.n(B);V.ZP.use(a(2513));var E={data:()=>({lead_calendar:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),lead_to_calendar:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),lead_menu:!1,lead_to_menu:!1,snackbar:{show:!1,message:null,color:null},isAdmin:"admin"==localStorage.getItem("role"),isCreateMode:!0,selectedStatus:0,search_string:"",dialog:!1,importLeadDialog:!1,dialogDelete:!1,date_to:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),menu2:!1,headers:[{text:"Name & Lastname",value:"name_lastname",width:"200px",show:!0,scheduled:!1},{text:"Created Date",value:"created_at",width:"200px",show:!0,scheduled:!1},{text:"Agent",value:"agent",width:"200px",show:!0,scheduled:!1},{text:"Place",value:"place",width:"200px",show:!0,scheduled:!1},{text:"Phone",value:"phone",width:"160px",show:!0,scheduled:!1},{text:"Info",value:"type.name",width:"160px",show:!0,scheduled:!1},{text:"Scheduled",value:"scheduled",width:"160px",scheduled:!0},{text:"Actions",value:"actions",sortable:!1,width:"100px",show:!1,scheduled:!1}],data:[],files:"",loading:!0,options:{},totalLeadsTable:0,create_leads_data:{user_id:"",salutation:"frau",first_name:"",last_name:"",email:"",birthday:"",street_no:"",zip:"",place:"",persons:"",company:"",actual_company:"",fax:"",phone:"",status_id:1,client_type_id:"1",canton_id:"",source_id:"",lang:"",kvg_id:"",vvg_id:""},get_item_data:[],lead_status_data:[],create_lead_note_data:{user_id:"",lead_id:"",note:""},client_types:[],canton_select:[],lang_select:[],source_id:[],deleteItemId:0,updateLeadsId:0,defaultItem:{user_id:"",salutation:"frau",first_name:"",last_name:"",email:"",birthday:"",street_no:"",zip:"",place:"",persons:"",company:"",fax:"",phone:"",status_id:"",client_type_id:"1",canton_id:"",source_id:"",lang:""},start_date_filter:"",end_date_filter:"",dialogAcceptLead:!1,deleteDialog:!1,itemId:null,itemEmail:null,insurances_companies:[]}),components:{SnackBar:M.Z},computed:{formTitle(){return!0===this.isCreateMode?"New Lead":"Update Lead"},lead_calendar_needs_format(){if(!this.lead_calendar)return null;const[t,e,a]=this.lead_calendar.split("-");return`${a}.${e}.${t}`},lead_to_calendar_needs_format(){if(!this.date_to)return null;const[t,e,a]=this.date_to.split("-");return`${a}.${e}.${t}`},formated_date(){if(!this.create_leads_data.birthday)return null;const[t,e,a]=this.create_leads_data.birthday.split("-");return`${a}.${e}.${t}`},filteredHeaders(){let t;switch(this.selectedStatus){case 15:t=this.isAdmin?this.headers.filter((t=>!t.scheduled)):this.headers.filter((t=>t.show));break;case 2:case 8:case 13:t=this.headers.filter((t=>t.show||t.scheduled)),console.log(t);break;default:t=this.headers.filter((t=>t.show));break}return t}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()},selectedStatus(t){this.getLeadsDatatable(t)},search_string:{handler(){this.getLeadsDatatable()},deep:!0},options:{handler(){this.getLeadsDatatable()},deep:!0},lead_calendar(t){this.start_date_filter=t,this.getLeadsDatatable()},lead_to_calendar(t){this.end_date_filter=t,this.getLeadsDatatable()}},mounted(){this.getLeadsDatatable(),this.getClientTypes(),this.getLeadStatuses(),this.getCantonSelect(),this.getLangSelect(),this.getSourceSelect(),this.headers.forEach(((t,e)=>{this.headers[e].text=this.translate(t.text),console.log("asdasd")})),N().get("/insurances").then((t=>{const e=t.data.data;let a=[];e.forEach((t=>{const e={text:t.name,value:t.id};a=[...a,e]})),this.insurances_companies=a})),this.$helperPlugin.ifAdmin()&&(this.isAdmin=!0)},methods:{translate(t){let e=null;return T.forEach(((a,s)=>{a.english.toLowerCase()==t.toLowerCase()&&(e=s)})),null===e?t:"german"==this.$store.state.language?z[e].german:z[e].english},createDefaultApplications(t){N().post("application/add",t).then((t=>console.log(t.data))).catch((t=>console.log(t)))},acceptLead(t){this.itemId=t.id,this.itemEmail=t.email,this.dialogAcceptLead=!0},declineLead(t){this.itemId=t.id,this.deleteDialog=!0},acceptLeadCustomer(){N().put("/leadstatus/"+this.itemId,{id:this.itemId,email:this.itemEmail,status:15,shouldCustomer:!0}).then((t=>{console.log(t.data);const e=t.data.customer,a={customer_id:e.id,insurance_id:e.kvg_id,sent_on:e.created_at,status_id:1,category_id:1};N().post("/contract",a).then((t=>{console.log(t.data)})).catch((t=>{console.log(t)}));const s=JSON.parse(localStorage.getItem("user")).id,l={customer_id:e.id,user_id:s,insurance_id:e.kvg_id,status_id:1};this.createDefaultApplications(l),this.getLeadsDatatable(),this.itemId=null,this.itemEmail=null})).catch((t=>console.log(t))),this.dialogAcceptLead=!1},declineLeadCustomer(){N()["delete"]("/lead/"+this.itemId,{id:this.itemId}).then((()=>{this.getLeadsDatatable()})).catch((t=>console.log(t))),this.deleteDialog=!1},getLeadStatuses(){this.lead_status_data.push({text:"All Leads",value:""}),N().get("/leadstatus").then((t=>{for(let e=0;t.data.length>0;e++)this.lead_status_data.push({text:t.data[e].en,value:t.data[e].id})})).catch((t=>{console.log(t)}))},getCustomLeadsDatatable(){this.loading=!0,N().get("/download_document").then((t=>{console.log(t.data)})).catch((t=>{console.log(t)}))},uploadCSV(){const t={headers:{"content-type":"multipart/form-data"}};let e=new FormData;e.append("file",this.files[0]),N().post("/admin/import/lead",e,t).then((t=>{this.importLeadDialog=!1,this.snackbar={message:t.data.message,color:"success",show:!0,error:!1},this.$refs.snackbar.toggleSnackbar(),this.getLeadsDatatable()})).catch((t=>{console.log(t)}))},getCantonSelect(){N().get("/canton").then((t=>{for(let e=0;t.data.length>0;e++)this.canton_select.push({text:t.data[e].name,value:t.data[e].id})})).catch((t=>{console.log(t)}))},getLangSelect(){N().get("/languages").then((t=>{for(const[e,a]of Object.entries(t.data))this.lang_select.push({text:this.translate(a),value:e})})).catch((t=>{console.log(t)}))},getSourceSelect(){N().get("/sources").then((t=>{for(let e=0;t.data.data.length>0;e++)this.source_id.push({text:this.translate(t.data.data[e].name),value:t.data.data[e].id})})).catch((t=>{console.log(t)}))},getLeadsDatatable(){this.loading=!0;const{sortBy:t,sortDesc:e,page:a,itemsPerPage:s}=this.options;let l;l="asc",e[0]&&(l="desc"),this.$nextTick((()=>{N().get("/lead/datatable?term="+this.search_string+"&start_date="+this.start_date_filter+"&end_date="+this.end_date_filter,{params:{sort_by:t[0],sort:l,page:a,per_page:s,status_id:this.selectedStatus,from_date:this.start_date_filter,to_date:this.end_date_filter}}).then((t=>{console.log(t.data),this.data=t.data.data,this.totalLeadsTable=t.data.total,this.loading=!1,this.$nextTick((()=>{const t=this.$el.querySelector(".v-data-footer__pagination"),e=t.innerHTML.replace("of",this.translate("of"));t.innerHTML=e}))})).catch((t=>{console.log(t)}))}))},createLeads(){const t=JSON.parse(localStorage.getItem("user")).id;N().post("/lead",{user_id:t,salutation:this.create_leads_data.salutation,first_name:this.create_leads_data.first_name,last_name:this.create_leads_data.last_name,email:this.create_leads_data.email,birthday:this.create_leads_data.birthday,street_no:this.create_leads_data.street_no,zip:this.create_leads_data.zip,place:this.create_leads_data.place,persons:this.create_leads_data.persons,company:this.create_leads_data.company,fax:this.create_leads_data.fax,phone:this.create_leads_data.phone,status_id:1,client_type_id:this.create_leads_data.client_type_id,canton_id:this.create_leads_data.canton_id,source_id:this.create_leads_data.source_id,lang:this.create_leads_data.lang,kvg_id:this.create_leads_data.kvg,vvg_id:this.create_leads_data.vvg,franchise_id:this.create_leads_data.company}).then((t=>{console.log("RESPONSE",t),this.create_leads_data={},this.snackbar={message:t.data.message,color:"success",show:!0,error:!1},this.$refs.snackbar.toggleSnackbar()})).catch((t=>{this.snackbar={message:t.response.data.message,error:!0},this.$refs.snackbar.toggleSnackbar()}))},getLeads(t){N().get("/lead/"+t).then((t=>{this.create_leads_data={},this.get_item_data.push(t.data.data),this.create_leads_data.user_id=t.data.data.user_id,this.create_leads_data.salutation=t.data.data.salutation,this.create_leads_data.first_name=t.data.data.first_name,this.create_leads_data.last_name=t.data.data.last_name,this.create_leads_data.email=t.data.data.email,this.create_leads_data.birthday=t.data.data.birthday,this.create_leads_data.street_no=t.data.data.street_no,this.create_leads_data.zip=t.data.data.zip,this.create_leads_data.place=t.data.data.place,this.create_leads_data.persons=t.data.data.persons,this.create_leads_data.company=t.data.data.company,this.create_leads_data.fax=t.data.data.fax,this.create_leads_data.phone=t.data.data.phone,this.create_leads_data.status_id=t.data.data.status_id,this.crete_leads_data.client_type_id=t.data.data.client_type_id})).catch((t=>{console.log(t)}))},updateLeads(t){N().put("/lead/"+t,this.create_leads_data).then((t=>{this.snackbar={message:t.data.message,color:"success",show:!0,error:!1},this.$refs.snackbar.toggleSnackbar()})).catch((t=>{console.log(t)}))},deleteItem(t){N()["delete"]("/lead/"+t).then((t=>{this.snackbar={message:t.data.message,color:"success",show:!0,error:!1},this.$refs.snackbar.toggleSnackbar()})).catch((t=>{console.log(t)}))},openDialog(){this.create_leads_data=this.defaultItem,this.isCreateMode=!0,this.dialog=!0},openImportDialog(){this.importLeadDialog=!0},editLeads(t){this.isCreateMode=!1,this.getLeads(t.id),this.updateLeadsId=t.id,this.dialog=!0},deleteLeadsModal(t){this.deleteItemId=t.id,this.dialogDelete=!0},deleteLeadsModalConfirm(){this.closeDelete(),this.deleteItem(this.deleteItemId),this.getLeadsDatatable()},close(){this.dialog=!1,this.importLeadDialog=!1},closeDelete(){this.dialogDelete=!1},save(){this.close(),this.createLeads(),this.getLeadsDatatable()},update(){this.close(),this.updateLeads(this.updateLeadsId),this.getLeadsDatatable()},getClientTypes(){N().get("/client/types").then((t=>{for(let e=0;t.data.data.length>0;e++)this.client_types.push({text:t.data.data[e].name,value:t.data.data[e].id})})).catch((t=>{console.log(t)}))},downloadSampleList(){window.open("https://1drv.ms/x/s!AtmgCOPp7P6ZgX-cj4qxpjsr9ilG?e=2bHK7h","_blank")}}},P=E,j=a(3736),F=(0,j.Z)(P,I,A,!1,null,"b18b0f0c",null),O=F.exports,H=a(6563),Y=a(4674),K={name:"LeadsComponent",data(){return{title:"Leads"}},components:{LeadsTable:O,NavbarControl:H.Z,UserControl:Y.Z}},U=K,G=(0,j.Z)(U,o,d,!1,null,null,null),X=G.exports,q={name:"HelpView",components:{Leads:X}},J=q,R=(0,j.Z)(J,s,l,!1,null,null,null),Q=R.exports},271:function(t,e,a){a.d(e,{Z:function(){return d}});a(7658);var s=a(5251),l=s.Z,n=a(4944),i=a(1050),r=a(6596),o=a(2653),d=l.extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:t=>"boolean"===typeof t||[1e3,1024].includes(t)},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:t=>(0,i.TI)(t).every((t=>null!=t&&"object"===typeof t))}},computed:{classes(){return{...l.options.computed.classes.call(this),"v-file-input":!0}},computedCounterValue(){const t=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,t);const e=this.internalArrayValue.reduce(((t,{size:e=0})=>t+e),0);return this.$vuetify.lang.t(this.counterSizeString,t,(0,i.XE)(e,1024===this.base))},internalArrayValue(){return(0,i.TI)(this.internalValue)},internalValue:{get(){return this.lazyValue},set(t){this.lazyValue=t,this.$emit("change",this.lazyValue)}},isDirty(){return this.internalArrayValue.length>0},isLabelActive(){return this.isDirty},text(){return this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?this.internalArrayValue.map((t=>{const{name:e="",size:a=0}=t,s=this.truncateText(e);return this.showSize?`${s} (${(0,i.XE)(a,1024===this.base)})`:s})):[this.placeholder]},base(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips(){return this.chips||this.smallChips}},watch:{readonly:{handler(t){!0===t&&(0,r.N6)("readonly is not supported on <v-file-input>",this)},immediate:!0},value(t){const e=this.multiple?t:t?[t]:[];(0,i.vZ)(e,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips(){return this.isDirty?this.text.map(((t,e)=>this.$createElement(n.Z,{props:{small:this.smallChips},on:{"click:close":()=>{const t=this.internalValue;t.splice(e,1),this.internalValue=t}}},[t]))):[]},genControl(){const t=l.options.methods.genControl.call(this);return this.hideInput&&(t.data.style=(0,o.y0)(t.data.style,{display:"none"})),t},genInput(){const t=l.options.methods.genInput.call(this);return t.data.attrs.multiple=this.multiple,delete t.data.domProps.value,delete t.data.on.input,t.data.on.change=this.onInput,[this.genSelections(),t]},genPrependSlot(){if(!this.prependIcon)return null;const t=this.genIcon("prepend",(()=>{this.$refs.input.click()}));return this.genSlot("prepend","outer",[t])},genSelectionText(){const t=this.text.length;return t<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,t)]},genSelections(){const t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach(((e,a)=>{this.$scopedSlots.selection&&t.push(this.$scopedSlots.selection({text:this.text[a],file:e,index:a}))})):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot(){const t=l.options.methods.genTextFieldSlot.call(this);return t.data.on={...t.data.on||{},click:t=>{t.target&&"LABEL"===t.target.nodeName||this.$refs.input.click()}},t},onInput(t){const e=[...t.target.files||[]];this.internalValue=this.multiple?e:e[0],this.initialValue=this.internalValue},onKeyDown(t){this.$emit("keydown",t)},truncateText(t){if(t.length<Number(this.truncateLength))return t;const e=Math.floor((Number(this.truncateLength)-1)/2);return`${t.slice(0,e)}â€¦${t.slice(t.length-e)}`}}})}}]);
//# sourceMappingURL=leads.516ea785.js.map