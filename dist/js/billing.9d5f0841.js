"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[876],{4674:function(t,e,a){a.d(e,{Z:function(){return C}});var s=a(8819),n=a(7179),i=a(4437),l=a(5057),r=a(2469),o=a(248),c=a(1908),d=a(1495),u=function(){var t=this,e=t._self._c;return e(i.Z,{attrs:{cols:"12",md:"12",lg:"12"}},[e("div",{staticClass:"second-sidebar-header",staticStyle:{padding:"0"}},[e(l.Z,{directives:[{name:"show",rawName:"v-show",value:t.isMobile,expression:"isMobile"}],on:{click:function(e){return t.$store.dispatch("toggleSecondVariant")}}},[t._v("mdi-arrow-collapse-right")]),e("div",[e("button",{staticClass:"border-blue",staticStyle:{overflow:"hidden",cursor:"pointer"},on:{click:function(e){return t.$store.dispatch("toggleLanguage")}}},["german"==t.$store.state.language?e("div",{staticClass:"center"},[e("img",{staticStyle:{width:"24px",height:"24px","object-fit":"cover","border-radius":"999px"},attrs:{src:a(1635),alt:"german language"}}),t._v(" CH ")]):e("div",{staticClass:"center"},[e("img",{staticStyle:{width:"24px",height:"24px","border-radius":"999px","object-fit":"cover"},attrs:{src:a(5257),alt:"german language"}}),t._v(" EN ")])]),e(d.Z,{attrs:{"offset-y":"",left:"",bottom:"",transition:"slide-x-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:n,attrs:i}){return[e(s.Z,t._g(t._b({attrs:{size:"35"}},"v-avatar",i,!1),n),[t.$store.state.profileImage.img_path?e("img",{staticClass:"pa-1",staticStyle:{"object-fit":"contain"},attrs:{src:t.$store.state.profileImage.img_path}}):e(r.Z,{attrs:{src:a(6164)}})],1)]}}])},[e(o.Z,{staticClass:"p-0"},[e(c.Z,{staticClass:"p-0"},[e(n.Z,{staticStyle:{background:"transparent"},on:{click:t.goToProfile}},[t._v(" "+t._s(t.translate("Profile"))+" ")])],1),e(c.Z,{staticClass:"p-0"},[e(n.Z,{staticStyle:{background:"transparent"},on:{click:t.exitApp}},[t._v(t._s(t.translate("Log out")))])],1)],1)],1)],1)],1)])},m=[],g=(a(7658),a(4069)),p=a.t(g,2),f={name:"UserControl",methods:{translate(t){let e=null;return g.forEach(((a,s)=>{a.english.toLowerCase()==t.toLowerCase()&&(e=s)})),null===e?t:"german"==this.$store.state.language?p[e].german:p[e].english},goToProfile(){this.$router.push("/profile")},exitApp(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.$router.push("/login")}}},h=f,_=a(3736),v=(0,_.Z)(h,u,m,!1,null,null,null),C=v.exports},3813:function(t,e,a){a.r(e),a.d(e,{default:function(){return W}});var s=function(){var t=this,e=t._self._c;return e("Billing")},n=[],i=a(4437),l=a(6035),r=a(5294),o=function(){var t=this,e=t._self._c;return e(l.Z,[e(r.Z,[e(i.Z,{attrs:{cols:"12",md:"12",lg:"12"}},[e(r.Z,[e(r.Z,{staticStyle:{"margin-left":"12px"}},[e(i.Z,{staticClass:"d-flex justify-start",attrs:{cols:"12",md:"8"}},[e("NavbarControl"),e("h2",{staticStyle:{display:"flex","align-items":"center"}},[t._v(t._s(t.translate(t.title)))])],1),e(i.Z,{attrs:{cols:"12",md:"4"}},[e("UserControl")],1)],1),e(i.Z,{staticStyle:{"margin-top":"24px"},attrs:{cols:"12",md:"12",lg:"12"}},[e("BillingTable")],1),e(i.Z,{attrs:{cols:"12",md:"12",lg:"12"}},[e("BillingPayment")],1)],1)],1)],1)],1)},c=[],d=a(7179),u=a(3385),m=a(5223),g=a(7652),p=a(7145),f=a(9789),h=a(4192),_=a(4648),v=a(1495),C=a(2927),Z=a(5234),x=a(5251),b=a(5838),k=function(){var t=this,e=t._self._c;return e(r.Z,[e("SnackBar",{ref:"snackbar",attrs:{data:t.snackbar}}),e(f.Z,{attrs:{width:"500"},model:{value:t.editModal,callback:function(e){t.editModal=e},expression:"editModal"}},[e(u.Z,[e(m.EB,{staticClass:"text-h5 lighten-2"},[t._v(" "+t._s(t.translate("Commission"))+" ")]),e(m.ZB,[e(x.Z,{attrs:{label:t.translate("Commission")},model:{value:t.commission_value,callback:function(e){t.commission_value=e},expression:"commission_value"}})],1),e(h.Z),e(m.h7,[e(Z.Z),e(d.Z,{attrs:{text:""},on:{click:function(e){t.editModal=!1}}},[t._v(" "+t._s(t.translate("Close"))+" ")]),e(d.Z,{attrs:{color:"primary"},on:{click:t.updateCommission}},[t._v(" "+t._s(t.translate("Finish"))+" ")])],1)],1)],1),t.isAdmin?e(i.Z,{attrs:{cols:"12",xs:"12",sm:"12",md:"6",lg:"6"}},[e("StatisticsTopFive")],1):t._e(),t.isAdmin?e(i.Z,{attrs:{cols:"12",xs:"12",sm:"12",md:"6",lg:"6"}},[e(u.Z,{staticClass:"user-card pa-3",attrs:{outlined:"",rounded:""}},[e(r.Z,[e(i.Z,{attrs:{cols:"4",xs:"12",sm:"12",md:"4",lg:"4"}},[e(_.Z,[t._v(t._s(t.translate("From"))+"-"+t._s(t.translate("To"))+" "+t._s(t.translate("date"))+":")]),e(v.Z,{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(x.Z,t._g(t._b({attrs:{"append-icon":"mdi-calendar",readonly:"",regular:""},model:{value:t.formated_date,callback:function(e){t.formated_date=e},expression:"formated_date"}},"v-text-field",s,!1),a))]}}],null,!1,481599029),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[e(p.Z,{attrs:{"no-title":"",scrollable:"",range:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[e(Z.Z),e(d.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v(" Cancel ")]),e(d.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.date)}}},[t._v(" OK ")])],1)],1)],1),e(i.Z,{attrs:{cols:"4",xs:"12",sm:"12",md:"4",lg:"4"}},[e(_.Z,[t._v(t._s(t.translate("Agent"))+":")]),e(C.Z,{attrs:{items:t.get_agents_list,label:t.translate("Agent")}})],1),e(i.Z,{staticClass:"d-flex align-center justify-end",attrs:{cols:"4",xs:"12",sm:"12",md:"4",lg:"4"}},[e(d.Z,{staticClass:"mt-4",attrs:{color:"primary"}},[t._v(t._s(t.translate("Download")))])],1)],1)],1)],1):t._e(),e(r.Z,{attrs:{justify:"space-between"}},[e(i.Z,{attrs:{cols:"12",xs:"12",sm:"12",md:"4",lg:"4"}},[e(x.Z,{attrs:{rounded:"",filled:"","background-color":"white",label:t.translate("Search"),"prepend-inner-icon":"mdi-magnify"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(i.Z,{attrs:{cols:"12",xs:"12",md:"4",lg:"4"}},[e("div",{staticClass:"d-flex justify-end align-center"},[e(C.Z,{attrs:{items:t.filters,value:t.filters[0]},model:{value:t.active_filter,callback:function(e){t.active_filter=e},expression:"active_filter"}})],1)])],1),e(i.Z,{attrs:{cols:"12",md:"12",lg:"12"},scopedSlots:t._u([{key:"top",fn:function(){return[e(b.Z,{attrs:{flat:""}},[e(Z.Z),e(f.Z,{attrs:{"max-width":"550px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(u.Z,[e(r.Z,{staticStyle:{padding:"24px"},attrs:{"no-gutters":"","no-wrap":""}},[e("img",{staticStyle:{width:"56px",height:"56px"},attrs:{src:a(8952)}}),e("div",{staticStyle:{"margin-left":"16px"}},[e(m.EB,{staticClass:"text-h5 p-0"},[t._v(t._s(t.translate("Delete")))]),e(m.ZB,{staticClass:"p-0",staticStyle:{"margin-top":"4px"}},[t._v(t._s(t.translate("Are you sure you want to delete this item?")))])],1)]),e(m.h7,{staticClass:"justify-end"},[e("button",{staticClass:"btn btn-cancel",class:{"btn-dark":t.$vuetify.theme.dark},on:{click:t.closeDelete}},[t._v(t._s(t.translate("Cancel")))]),e("button",{staticClass:"btn btn-decline",attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.deleteItemModalConfirm()}}},[t._v(t._s(t.translate("Confirm")))])])],1)],1)],1)]},proxy:!0}])},[e(g.Z,{attrs:{headers:t.headers,items:t.data,search:t.search,loading:t.loading,options:t.options,"server-items-length":t.totalTableData,"footer-props":{"items-per-page-text":t.translate("Rows per page"),"items-per-page-all-text":t.translate("All")}},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"loading",fn:function(){return[t._v(" "+t._s(t.translate("Loading items"))+"... ")]},proxy:!0},{key:"no-data",fn:function(){return[t._v(" "+t._s(t.translate("No data available"))+" ")]},proxy:!0},{key:"item.agent_name",fn:function({item:a}){return[null!=a.user?e("div",[t._v(" "+t._s(a.user.first_name)+" "+t._s(a.user.last_name)+" ")]):t._e()]}},{key:"item.edit_commission",fn:function({item:a}){return[null!=a.rated?e(d.Z,{attrs:{icon:""},on:{click:function(e){return t.openEditModal(a,!1)}}},[e("svg",{attrs:{width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M5.4821 8.94807L5.00602 12.298C4.98108 12.4757 5.03437 12.6553 5.15222 12.7902C5.26992 12.9251 5.44034 13.0017 5.61888 13H5.6944L9.08546 12.5772V12.577C9.22097 12.5599 9.34679 12.4977 9.44298 12.4006L16.1473 5.65393C16.6788 5.1571 16.9865 4.46458 16.9996 3.73522C17.0127 3.0059 16.7301 2.30261 16.2167 1.7869C15.7035 1.27119 15.0035 0.987279 14.2777 1.00044C13.5519 1.01361 12.8626 1.32273 12.3681 1.85661L5.65536 8.59929C5.56146 8.69364 5.50047 8.81606 5.48181 8.94821L5.4821 8.94807ZM6.66691 9.32578L13.2304 2.72678C13.6031 2.40349 14.1136 2.29252 14.5858 2.43212C15.0582 2.57172 15.4275 2.94285 15.5665 3.41747C15.7054 3.89194 15.595 4.40493 15.2732 4.77934L8.71808 11.3783L6.33218 11.674L6.66691 9.32578Z",fill:"#36a5dd"}}),e("path",{attrs:{d:"M9.53572 0H2.35709C1.73198 0 1.13243 0.244597 0.690427 0.680187C0.248267 1.11564 0 1.70629 0 2.32228V16.6777C0 17.2937 0.248279 17.8844 0.690427 18.3198C1.13243 18.7554 1.73198 19 2.35709 19H15.6429C16.268 19 16.8676 18.7554 17.3096 18.3198C17.7517 17.8844 18 17.2937 18 16.6777V8.07501C18 7.84882 17.8774 7.63971 17.6786 7.52662C17.4797 7.41338 17.2347 7.41338 17.0357 7.52662C16.8368 7.63971 16.7144 7.84882 16.7144 8.07501V16.6777C16.7144 16.9577 16.6014 17.2263 16.4005 17.4242C16.1996 17.6221 15.9271 17.7333 15.6429 17.7333H2.35709C2.07294 17.7333 1.80044 17.6221 1.59955 17.4242C1.39865 17.2263 1.28565 16.9577 1.28565 16.6777V2.32228C1.28565 2.04234 1.39865 1.77373 1.59955 1.57582C1.80044 1.3779 2.07293 1.26672 2.35709 1.26672H9.53572C9.76546 1.26672 9.97758 1.14597 10.0925 0.949974C10.2073 0.754121 10.2073 0.5126 10.0925 0.316608C9.97758 0.120755 9.76547 3.73898e-06 9.53572 3.73898e-06L9.53572 0Z",fill:"#36a5dd"}})])]):e(d.Z,{attrs:{icon:""},on:{click:function(e){return t.openEditModal(a,!0)}}},[e("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 26 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M23.2854 3.54275L11.1711 14.5999L6.77125 9.79979C6.34276 9.3426 5.62849 9.3141 5.14257 9.71409C4.68538 10.1426 4.65688 10.8568 5.05687 11.3428L10.2283 16.9999C10.4569 17.257 10.7712 17.3714 11.0855 17.3714C11.3713 17.3714 11.6284 17.2857 11.857 17.0856L24.8284 5.22846C25.2856 4.79997 25.3141 4.08571 24.9141 3.59979C24.4856 3.1426 23.7713 3.1141 23.2856 3.54259L23.2854 3.54275Z",fill:"#FFC107"}}),e("path",{attrs:{d:"M11.9999 24C18.6285 24 23.9999 18.6286 23.9999 12C23.9999 11.4286 23.9714 10.8857 23.8857 10.3428C23.8 9.71428 23.2286 9.28576 22.6001 9.37147C21.9715 9.45717 21.543 10.0286 21.6287 10.6571C21.6859 11.1143 21.7144 11.5715 21.7144 12C21.7144 17.3428 17.343 21.7143 12.0001 21.7143C6.65724 21.7143 2.28581 17.3428 2.28581 12C2.28581 6.65713 6.65724 2.2857 12.0001 2.2857C14.2859 2.2857 16.5144 3.0857 18.2572 4.57147C18.7429 4.97146 19.4572 4.91427 19.8572 4.42857C20.2572 3.94288 20.2 3.22857 19.7143 2.82862C17.5716 0.999847 14.8287 0 12 0C5.37143 0 0 5.37143 0 12C0 18.6286 5.37143 24 12 24L11.9999 24Z",fill:"#FFC107"}})])])]}},{key:"item.commission",fn:function({item:a}){return[null!=a.rated?e("span",[t._v(" "+t._s(parseInt(a.commission))+" ")]):e("span",[t._v(" "+t._s(t.translate("Pending"))+" ")])]}},{key:"item.customer_name",fn:function({item:a}){return[a.customer?e("div",[t._v(" "+t._s(a.customer.first_name)+" "+t._s(a.customer.last_name)+" ")]):t._e()]}},{key:"item.created_at",fn:function({item:e}){return[t._v(" "+t._s(t._f("moment")(e,"DD.MM.YYYY HH:mm"))+" ")]}}],null,!0)}),e(f.Z,{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(u.Z,[e(m.EB,{staticClass:"d-flex justify-center"},[e("span",{staticClass:"text-h5"},[t._v("Set the default fee % for all agents")])]),e(m.ZB,[e(l.Z,[e(r.Z,{staticClass:"d-flex justify-center"},[e(i.Z,{attrs:{cols:"12",xs:"12",md:"4",lg:"4"}},[e(x.Z,{attrs:{small:"",outlined:"",type:"number",max:"100",min:"0",value:"0"},model:{value:t.percentage,callback:function(e){t.percentage=e},expression:"percentage"}})],1)],1)],1)],1),e(m.h7,[e(Z.Z),e(d.Z,{directives:[{name:"show",rawName:"v-show",value:t.isCreateMode,expression:"isCreateMode"}],attrs:{color:"primary"},on:{click:t.save}},[t._v(" Done ")]),e(d.Z,{directives:[{name:"show",rawName:"v-show",value:!t.isCreateMode,expression:"!isCreateMode"}],attrs:{color:"primary"},on:{click:t.update}},[t._v(" Done ")])],1)],1)],1)],1)],1)},y=[],w=(a(7658),a(9669)),S=a.n(w),L=a(144),M=a(4069),I=a.t(M,2),A=a(8209),B=a(2201);L.ZP.use(a(2513));var D={data(){return{date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),menu:!1,search:"",isAdmin:!1,percentage:0,filters:[{text:this.translate("All"),value:"All"},{text:this.translate("Approved"),value:"Approved"},{text:this.translate("Pending"),value:"Pending"}],headers:[{text:this.translate("Date"),align:"start",value:"created_at"},{text:this.translate("Agent Name"),value:"agent_name"},{text:this.translate("Customer Name"),value:"customer_name"},{text:this.translate("Insurance package"),value:"insurance"},{text:this.translate("Commissions"),value:"commission"},{text:this.translate("Actions"),value:"edit_commission",align:"center"}],data:[],get_agents_list:[],snackbar:{show:!1,message:null,color:null},isCreateMode:!0,dialog:!1,dialogDelete:!1,loading:!0,options:{},totalTableData:0,active_filter:"All",editItemInfo:0,editModal:!1,commission_value:0}},computed:{formated_date(){if(!this.date)return null;const[t,e,a]=this.date.split("-");return`${a}.${e}.${t}`}},watch:{options:{handler(){this.getItemsTable()},deep:!0},active_filter(t){this.getItemsTable(t)}},components:{SnackBar:A.Z,StatisticsTopFive:B.Z},methods:{translate(t){let e=null;return M.forEach(((a,s)=>{a.english.toLowerCase()==t.toLowerCase()&&(e=s)})),null===e?t:"german"==this.$store.state.language?I[e].german:I[e].english},async updateCommission(){this.loading=!0,this.editModal=!1,S().put(`billing/commission/${this.editItemInfo.id}`,{commission:this.commission_value,customer_id:this.editItemInfo.customer_id,user_id:this.editItemInfo.user_id}).then((t=>{this.snackbar={show:!0,message:t.data.message,color:"success",error:"commission value invalid"==t.data.message.toLowerCase()},this.$refs.snackbar.toggleSnackbar(!0),this.getItemsTable()})).catch((t=>console.log(t)))},openEditModal(t,e){this.editItemInfo=t,this.commission_value=e?0:parseInt(t.commission),this.editModal=!0},getItemsTable(t="All"){this.loading=!0;const{sortBy:e,sortDesc:a,page:s,itemsPerPage:n}=this.options;let i;i="asc",a[0]&&(i="desc"),S().get("/billing/datatable",{params:{sort_by:e[0],sort:i,page:s,per_page:n,filter:t}}).then((t=>{console.log(t.data.data),this.data=t.data.data,this.totalTableData=t.data.total,this.loading=!1,this.$nextTick((()=>{const t=this.$el.querySelector(".v-data-footer__pagination"),e=t.innerHTML.replace("of",this.translate("of"));t.innerHTML=e}))})).catch((t=>{console.log(t)}))},getAgentsList(){S().get("/admin/agent").then((t=>{for(let e=0;t.data.length>0;e++)this.get_agents_list.push({text:t.data[e].first_name+" "+t.data[e].last_name,value:t.data[e].id})})).catch((t=>{console.log(t)}))},openDialog(){this.isCreateMode=!0,this.dialog=!0}},save(){this.dialog=!1},update(){this.dialog=!1},mounted(){this.getItemsTable(),this.getAgentsList(),this.$helperPlugin.ifAdmin()&&(this.isAdmin=!0)}},$=D,T=a(3736),P=(0,T.Z)($,k,y,!1,null,"6de4e161",null),j=P.exports,E=a(6563),H=function(){var t=this,e=t._self._c;return e(r.Z)},N=[],F={data(){return{}}},V=F,Y=(0,T.Z)(V,H,N,!1,null,"2575084c",null),O=Y.exports,U=a(4674),z={name:"BillingComponent",data(){return{title:"Billing"}},methods:{translate(t){let e=null;return M.forEach(((a,s)=>{a.english.toLowerCase()==t.toLowerCase()&&(e=s)})),null===e?t:"german"==this.$store.state.language?I[e].german:I[e].english}},components:{BillingTable:j,BillingPayment:O,NavbarControl:E.Z,UserControl:U.Z}},q=z,K=(0,T.Z)(q,o,c,!1,null,"1e17bb59",null),R=K.exports,G={name:"BillingView",components:{Billing:R}},J=G,Q=(0,T.Z)(J,s,n,!1,null,null,null),W=Q.exports}}]);
//# sourceMappingURL=billing.9d5f0841.js.map