"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[273],{2095:function(t,e,a){a.d(e,{Z:function(){return C}});var o=a(3423),r=a(4562),s=a(266),i=a(4324),n=a(5495),c=a(5808),l=a(4525),h=a(4528),d=function(){var t=this,e=t._self._c;return e(s.Z,{attrs:{cols:"12",md:"12",lg:"12"}},[e("div",{staticClass:"second-sidebar-header",staticStyle:{padding:"0"}},[e(i.Z,{directives:[{name:"show",rawName:"v-show",value:t.isMobile,expression:"isMobile"}],on:{click:function(e){return t.$store.dispatch("toggleSecondVariant")}}},[t._v("mdi-arrow-collapse-right")]),e("div",[e("button",{staticClass:"border-blue",staticStyle:{overflow:"hidden",cursor:"pointer"},on:{click:function(e){return t.$store.dispatch("toggleLanguage")}}},["german"==t.$store.state.language?e("div",{staticClass:"center"},[e("img",{staticStyle:{width:"24px",height:"24px","object-fit":"cover","border-radius":"999px"},attrs:{src:a(1635),alt:"german language"}}),t._v(" CH ")]):e("div",{staticClass:"center"},[e("img",{staticStyle:{width:"24px",height:"24px","border-radius":"999px","object-fit":"cover"},attrs:{src:a(5257),alt:"german language"}}),t._v(" EN ")])]),e(h.Z,{attrs:{"offset-y":"",left:"",bottom:"",transition:"slide-x-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:r,attrs:s}){return[e(o.Z,t._g(t._b({attrs:{size:"35"}},"v-avatar",s,!1),r),[t.$store.state.profileImage.img_path?e("img",{staticClass:"pa-1",staticStyle:{"object-fit":"contain"},attrs:{src:t.$store.state.profileImage.img_path}}):e(n.Z,{attrs:{src:a(6164)}})],1)]}}])},[e(c.Z,{staticClass:"p-0"},[e(l.Z,{staticClass:"p-0"},[e(r.Z,{staticStyle:{background:"transparent"},on:{click:t.goToProfile}},[t._v(" "+t._s(t.translate("Profile"))+" ")])],1),e(l.Z,{staticClass:"p-0"},[e(r.Z,{staticStyle:{background:"transparent"},on:{click:t.exitApp}},[t._v(t._s(t.translate("Log out")))])],1)],1)],1)],1)],1)])},u=[],m=a(4069),p=a.t(m,2),g={name:"UserControl",methods:{translate(t){let e=null;return m.forEach(((a,o)=>{a.english.toLowerCase()==t.toLowerCase()&&(e=o)})),null===e?t:"german"==this.$store.state.language?p[e].german:p[e].english},goToProfile(){this.$router.push("/profile")},exitApp(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.$router.push("/login")}}},f=g,w=a(1001),v=(0,w.Z)(f,d,u,!1,null,null,null),C=v.exports},3607:function(t,e,a){a.d(e,{Z:function(){return s}});const o="EwCAA8l6BAAUAOyDv0l6PcCVu89kmzvqZmkWABkAAaJN5BJUxx3rKjjD5LS27hn8Vn60P0ub8WFuvjpGqxrqrMZgDhcI7XVTerA8Kr1pAtMf2X1IRAK4hxOoiztBiERzZLWP/pn4KPhaSSz1yVdDVHjD+hoxzHbTBsymcLTQ8UWcF57uqZhNIxuULIWux1bE6ucSM6Rt7E01vjP11Fe+KTT/7Ejv7xDfGeru0PNl5EDMj+6cYLJH+F3xACwXqMToo587JjLuk2y4j+AaDlUNDKLE9FjpJxZsiruNDGsQfU58vPfAk3qg/AzcmTqKgnofaiWBo8OZQ8xZ92VnDENtMWkSq2DK31YNP4TsWqzeXzV3IvvSrPjLQXOTqC7Iqw4DZgAACPCx41q76eziUAJnUNZdiAbvGCYpoQDoOuyqTrzmWofnafXta2uTIh/Zd9MyPohr19Xqv/0aznfzImRoDYZ08bu/VHE2NUyNaptvJ5/5E9+JPdwMo1xWOk+aykIZr9Bw5EjynvreZck64eCco1lL7u4H/n0iyYNOoKG05pTtHne+CYnkIBbLNnzuScMdRpKkyEphhYkoLgnVIaLVMKR60lg/EbFxGmzzB/LVC4qIXK4VQvKCS8A+pA9LYA7/Aa8msq4yOPzC7Va16+3/IiVLOp/ZyvtWnecMHQYQ12yYqEAZGnkY2BCBPfPkFYjpp6soRpwje8MYNJ2HQrHfJfU02thCv96rpuDknW2K8Ip+SPIi/mnQTpwFwYB8mxBMUeB6pSvCpj4BZQV0ZyVP1+za+yW7yT+J5HSqZGC1Bs0PAaCTz5CJXmg30z9lDpiQnDUwA3Qhh7JsBrRdIviBiaVLCDri1Brz12jLbRPv1V3KYiCR1jlpkXn1xsLMFZ5pNaOOCTOOTMn4yG7taZNgnGeSCFgx/F94Pq6tw2vF1g8u41pvcFtP3FZwYx5bnAlsZ3rymeftQXlEMoLgFveEkH1NXlcszny0B5E/wVdhbdWaZpjv1W3J0SIAz8XuS/HhnkAjR9rpVuR5pGYne9LQgAxIctLMzEFpU4ThlLVVOgQ8wJfHprkJrr86UnprdfXdyGMWerCBxfURe1DsXo7uau8BQ5RwqBneZcYWOBji9bbDwscKExli22ddyXv0SAiaiSaVgzH9AXx80gBsVGxuo8ledGRt94FZn19e0guKiQI=";class r{static async getAllEvents(){const t=new Date,e=new Date(t.setFullYear(t.getFullYear()-1)).toDateString(),a=new Date(t.setFullYear(t.getFullYear()+2)).toDateString(),r=await fetch(`https://graph.microsoft.com/v1.0/me/calendarview?startdatetime=${e}&enddatetime=${a}`,{method:"GET",headers:{Authorization:`Bearer ${o}`}}),s=await r.json();return s.value}static async createEvent(t){try{const e=await fetch("https://graph.microsoft.com/v1.0/me/events",{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await e.json();return a}catch(e){console.log(e)}}static async getItems(){const t=await fetch("https://graph.microsoft.com/v1.0/me/drive/root/children",{method:"GET",headers:{Authorization:`Bearer ${o}`}}),e=await t.json();return e}static async getClienzaId(){const{value:t}=await this.getItems();let e=null;return t.forEach((t=>{"clienza"==t.name.toLowerCase()&&(e=t.id)})),e}static async getRootFolderId(t){const e=await this.getClienzaId();let a=null;const r=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/children`,{method:"GET",headers:{Authorization:`Bearer ${o}`}}),s=await r.json(),{value:i}=s;return i.forEach((e=>{e.name.toLowerCase()==t&&(a=e.id)})),a}static async getClienzaRoot(){const t=await this.getClienzaId(),e=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${t}/children`,{method:"GET",headers:{Authorization:`Bearer ${o}`}}),a=await e.json();return a}static async createFolder(t,e){const a={name:t,folder:{},"@microsoft.graph.conflictBehavior":"rename"},r=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/children`,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(a)}),s=await r.json();return s}static async getCustomers(){const t=await this.getRootFolderId("customers"),e=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${t}/children`,{method:"GET",headers:{Authorization:`Bearer ${o}`}}),a=await e.json();return a}static async checkCustomerSpace(t,e=!1){const a=await this.getCustomers();let o={exists:!1};return e?a.value.forEach((e=>{const a=e.name.split(" ");a[a.length-1]==t&&(o.exists=!0,o.customer=e)})):a.value.forEach((e=>{e.name==t&&(o.exists=!0,o.customer=e)})),o}static async sendDocument({customer:t,type:e,file:a}){const r=await this.checkCustomerSpace(t);if(r.exists){const s=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${r.customer.id}/children`,{method:"GET",headers:{Authorization:`Bearer ${o}`}}),i=await s.json();let n={exists:!1,folder:null};return i.value.forEach((t=>{t.name.toLowerCase()==e.toLowerCase()&&(n.exists=!0,n.folder=t)})),1==n.exists?this.sendFile(a,n.folder.id):(await this.createFolder(e,r.customer.id),this.sendDocument({customer:t,type:e,file:a})),n}{const o=await this.getRootFolderId("customers");return this.createFolder(t,o),void this.sendDocument({customer:t,type:e,file:a})}}static async generateProfileFolder(){const t="Profile",e=await this.checkOnRootFolder(t);if(!e){const e=await this.getClienzaId();await this.createFolder(t,e)}const a=await this.getRootFolderId(t.toLowerCase());return a}static async setProfilePic(){console.log(await this.getProfilePic(JSON.parse(localStorage.getItem("user")).id))}static async getProfilePic(t){await this.generateProfileFolder();const e=await this.getInfo("Profile");let a=null;return e.forEach((e=>{const o=e.title.split(" "),r=o[o.length-1];r==t&&(a=e)})),null!=a&&a}static async sendFile(t,e,a=null){const r=`https://graph.microsoft.com/v1.0/me/drive/items/${e}:/${null!=a?a:t.name}:/content`,s=new FormData;s.append("file",t),fetch(r,{method:"PUT",headers:{Authorization:`Bearer ${o}`,"Content-Type":"multipart/form-data"},body:t}).then((t=>console.log(t.url))),console.log(r)}static async getCustomerDownloadFileLink(t,e="applications",a=!0){const{customer:r}=await this.checkCustomerSpace(t,!0),s=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${r.id}/children`,{method:"get",headers:{Authorization:`Bearer ${o}`}}),i=await s.json(),n=i.value.filter((t=>t.name.toLowerCase()==e));console.log("aa",n);const c=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${n[0].id}/children`,{method:"get",headers:{Authorization:`Bearer ${o}`}}),l=await c.json();return 0==a?l.value:l.value[0]["@microsoft.graph.downloadUrl"]}static async getOtherApplications(t){const e=await this.getCustomerDownloadFileLink(t,"other applications",!1);console.log("sss",e.value),console.log(t)}static async checkOnRootFolder(t){const e=await this.getClienzaRoot();let a=!1;return e.value.forEach((e=>{e.name.toLowerCase()==t.toLowerCase()&&(a=!0)})),a}static async addInfo({title:t,file:e,type:a="Help"}){const o=await this.getClienzaRoot();let r=!1;if(o.value.forEach((t=>{t.name.toLowerCase()==a.toLowerCase()&&(r=!0)})),!r){const t=await this.getClienzaId();await this.createFolder(a,t)}const s=await this.getRootFolderId(a.toLowerCase()),i=e.name.split(".").pop(),n=`${t}.${i}`;return await this.sendFile(e,s,n),n}static async getInfo(t="Help"){let e=await this.getRootFolderId(t.toLowerCase());if(null==e){const e=await this.getClienzaId();await this.createFolder(t,e)}e=await this.getRootFolderId(t.toLowerCase());const a=await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${e}/children`,{method:"GET",headers:{Authorization:`Bearer ${o}`}}),r=await a.json();let s=[];return r.value.forEach((t=>{let e=t.name.split(".");e.pop(),e=e.toString().replace(",","");const a={id:t.id,title:e,url:t.webUrl,downloadUrl:t["@microsoft.graph.downloadUrl"]};s=[...s,a]})),s}static async deleteInfo(t){await fetch(`https://graph.microsoft.com/v1.0/me/drive/items/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}})}}var s=r}}]);
//# sourceMappingURL=273.12c4bf20.js.map