"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[193],{2095:function(t,e,a){a.d(e,{Z:function(){return C}});var s=a(3423),r=a(4562),n=a(266),o=a(4324),l=a(5495),i=a(5808),c=a(4525),d=a(4528),h=function(){var t=this,e=t._self._c;return e(n.Z,{attrs:{cols:"12",md:"12",lg:"12"}},[e("div",{staticClass:"second-sidebar-header",staticStyle:{padding:"0"}},[e(o.Z,{directives:[{name:"show",rawName:"v-show",value:t.isMobile,expression:"isMobile"}],on:{click:function(e){return t.$store.dispatch("toggleSecondVariant")}}},[t._v("mdi-arrow-collapse-right")]),e("div",[e("button",{staticClass:"border-blue",staticStyle:{overflow:"hidden",cursor:"pointer"},on:{click:function(e){return t.$store.dispatch("toggleLanguage")}}},["german"==t.$store.state.language?e("div",{staticClass:"center"},[e("img",{staticStyle:{width:"24px",height:"24px","object-fit":"cover","border-radius":"999px"},attrs:{src:a(1635),alt:"german language"}}),t._v(" CH ")]):e("div",{staticClass:"center"},[e("img",{staticStyle:{width:"24px",height:"24px","border-radius":"999px","object-fit":"cover"},attrs:{src:a(5257),alt:"german language"}}),t._v(" EN ")])]),e(d.Z,{attrs:{"offset-y":"",left:"",bottom:"",transition:"slide-x-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:r,attrs:n}){return[e(s.Z,t._g(t._b({attrs:{size:"35"}},"v-avatar",n,!1),r),[t.$store.state.profileImage.img_path?e("img",{staticClass:"pa-1",staticStyle:{"object-fit":"contain"},attrs:{src:t.$store.state.profileImage.img_path}}):e(l.Z,{attrs:{src:a(6164)}})],1)]}}])},[e(i.Z,{staticClass:"p-0"},[e(c.Z,{staticClass:"p-0"},[e(r.Z,{staticStyle:{background:"transparent"},on:{click:t.goToProfile}},[t._v(" "+t._s(t.translate("Profile"))+" ")])],1),e(c.Z,{staticClass:"p-0"},[e(r.Z,{staticStyle:{background:"transparent"},on:{click:t.exitApp}},[t._v(t._s(t.translate("Log out")))])],1)],1)],1)],1)],1)])},u=[],g=a(4069),p=a.t(g,2),f={name:"UserControl",methods:{translate(t){let e=null;return g.forEach(((a,s)=>{a.english.toLowerCase()==t.toLowerCase()&&(e=s)})),null===e?t:"german"==this.$store.state.language?p[e].german:p[e].english},goToProfile(){this.$router.push("/profile")},exitApp(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.$router.push("/login")}}},m=f,v=a(1001),_=(0,v.Z)(m,h,u,!1,null,null,null),C=_.exports},9436:function(t,e,a){a.r(e),a.d(e,{default:function(){return U}});var s=function(){var t=this,e=t._self._c;return e("Statistics")},r=[],n=a(266),o=a(2118),l=a(1713),i=function(){var t=this,e=t._self._c;return e(o.Z,[e(l.Z,[e(n.Z,{attrs:{cols:"12",md:"12",lg:"12"}},[e(l.Z,[e(n.Z,{attrs:{cols:"12"}},[e(l.Z,{staticStyle:{"margin-left":"12px"}},[e(n.Z,{staticClass:"d-flex justify-start",attrs:{cols:"12",md:"8"}},[e("NavbarControl"),e("h2",{staticStyle:{display:"flex","align-items":"center"}},[t._v(t._s(t.translate(t.title)))])],1),e(n.Z,{attrs:{cols:"12",md:"4"}},[e("UserControl")],1)],1)],1),e(n.Z,{attrs:{cols:"12",md:"6",lg:"6"}},[e("StatisticsChart")],1),e(n.Z,{attrs:{cols:"12",md:"6",lg:"6"}},[e("StatisticsLine")],1),e(n.Z,{attrs:{cols:"12",md:"12",lg:"12"}},[e("StatisticBarChart")],1)],1)],1)],1)],1)},c=[],d=a(4145),h=a(2540),u=function(){var t=this,e=t._self._c;return e(l.Z,[e(n.Z,{attrs:{cols:"12",md:"12",lg:"12"}},[e(d.Z,{staticClass:"chart-card stats",attrs:{outlined:"",rounded:""}},[e(h.Z,[e("h3",[t._v(t._s(t.translate("Leads status information")))])]),e("div",{staticClass:"d-flex justify-center",attrs:{id:"chart"}},[e("ApexChart",{ref:"realtimeChart",attrs:{height:"350",type:"donut",width:"590",options:t.chartOptions,series:t.series}})],1)],1)],1)],1)},g=[],p=a(9669),f=a.n(p),m=a(4069),v=a.t(m,2),_={data:function(){return{series:[],chartOptions:{labels:[],dataLabels:{enabled:!1},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{show:!1}}}],legend:{position:"right",offsetY:0,height:"100%",horizontalAlign:"left"}},lang_list:[],canton_list:[],source_list:[],selected_lang:"",selected_canton:"",selected_source:""}},methods:{getLangSelect(){f().get("/languages").then((t=>{for(const[e,a]of Object.entries(t.data))this.lang_list.push({text:a,value:e})})).catch((t=>{console.log(t)}))},getSourceSelect(){f().get("/sources").then((t=>{for(let e=0;t.data.data.length>0;e++)this.source_list.push({text:t.data.data[e].name,value:t.data.data[e].id})})).catch((t=>{console.log(t)}))},getCantonSelect(){f().get("/canton").then((t=>{for(let e=0;t.data.length>0;e++)this.canton_list.push({text:t.data[e].name,value:t.data[e].id})})).catch((t=>{console.log(t)}))},getStatisticsByStatus(){f().get("/leadstatistics").then((t=>{console.log(t.data);const e=t.data;e.forEach(((t,a)=>{if(void 0!=t.status&&1==t.status.id){const t=[];return e.forEach(((s,r)=>{null==s.status&&(t.push(r),e[a].percentage+=s.percentage,e[a].total=`${parseInt(e[a].total)+parseInt(s.total)}`)})),void t.forEach((t=>{e.splice(t,1)}))}})),e.forEach((t=>{this.series.push(parseInt(t.total)),t.status?this.chartOptions.labels.push(this.translate(t.status.en)):this.chartOptions.labels.push("Undefined")}))})).catch((t=>console.log(t)))},translate(t){let e=null;return m.forEach(((a,s)=>{a.english.toLowerCase()==t.toLowerCase()&&(e=s)})),null===e?t:"german"==this.$store.state.language?v[e].german:v[e].english}},watch:{selected_lang:function(t){console.log(t),this.getPieChartData()},selected_canton:function(t){console.log(t),this.getPieChartData()},selected_source:function(t){console.log(t),this.getPieChartData()}},mounted(){this.getLangSelect(),this.getSourceSelect(),this.getCantonSelect(),this.getStatisticsByStatus()}},C=_,S=a(1001),x=(0,S.Z)(C,u,g,!1,null,"47c7b3d3",null),Z=x.exports,b=a(9730),w=function(){var t=this,e=t._self._c;return e(l.Z,[e(n.Z,{attrs:{cols:"12",xs:"12",sm:"12",md:"12",lg:"12"}},[e(d.Z,{staticClass:"stats pa-5",attrs:{outlined:""}},[e(h.Z,[e("h3",[t._v(t._s(t.translate("Perfomance of agents")))])]),e("div",{attrs:{id:"chart"}},[e("apexChart",{ref:"apexChart",attrs:{height:"350",type:"bar",options:t.options,series:t.series}}),e("div",{staticClass:"toolbar"},[e(b.Z,{attrs:{items:t.orderItems,dense:"",outlined:""},model:{value:t.orderValue,callback:function(e){t.orderValue=e},expression:"orderValue"}})],1)],1)],1)],1)],1)},y=[],L={data:function(){return{orderItems:[{text:this.translate("Last week"),value:"week"},{text:this.translate("Last month"),value:"month"},{text:this.translate("Last year"),value:"year"}],orderValue:"month",options:{chart:{toolbar:{show:!0,tools:{download:!1}},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}},fontFamily:"Lato, sans-serif"},legend:{markers:{fillColors:["#1A1F3A","#36A5DD","#FE9210"]}},theme:{mode:"light"},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{type:"date",categories:["Loading"]},grid:{strokeDashArray:7,yaxis:{lines:{show:!0}}},plotOptions:{bar:{horizontal:!1,columnWidth:"40%",endingShape:"rounded"}},dataLabels:{enabled:!1},fill:{opacity:1,colors:["#1A1F3A","#36A5DD","#FE9210"]}},series:[{name:"Completed leads",data:[]},{name:"All leads",data:[]},{name:"Not completed",data:[]}],leads:[],user:[]}},created(){this.getStatistics(),this.getLeads()},methods:{translate(t){let e=null;return m.forEach(((a,s)=>{a.english.toLowerCase()==t.toLowerCase()&&(e=s)})),null===e?t:"german"==this.$store.state.language?v[e].german:v[e].english},removeDuplicates(t){return t.filter(((e,a)=>t.indexOf(e)===a))},getLeads(t=""){f().get(`/get_all_leads?order=${t}`).then((t=>{const e=t.data,a=[];e.forEach((t=>{a.push(t.user_id)}));let s=this.removeDuplicates(a);f().get("/get_all_users").then((t=>{const a=t.data;this.options.xaxis.categories.length=0;const r=[],n=[],o=[];s.forEach(((t,l)=>{let i=a.find((e=>parseInt(e.id)==parseInt(t)));if(void 0==i)return;let c=e.filter((t=>t.user_id==i.id));if(0!=c.length){console.count(c.length),i.leads=c,s[l]=i,this.options.xaxis.categories.push(i.first_name.toString());let t=0,e=0;c.forEach((a=>{15==a.status_id?t++:e++})),r.push(t),n.push(c.length),o.push(e)}})),this.$refs.apexChart.updateSeries([{name:this.translate("Completed"),data:r},{name:this.translate("All leads"),data:n},{name:this.translate("Not completed"),data:o}],!1,!0)}))}))},getStatistics(){}},watch:{orderValue(t){this.getLeads(t)}}},k=L,A=(0,S.Z)(k,w,y,!1,null,"4f37b310",null),E=A.exports,$=a(8392),I=a(1551),D=a(2095),O={name:"StatisticsComponent",data(){return{title:"Statistics"}},components:{StatisticsChart:Z,StatisticBarChart:E,NavbarControl:I.Z,UserControl:D.Z,StatisticsLine:$.Z},methods:{translate(t){let e=null;return m.forEach(((a,s)=>{a.english.toLowerCase()==t.toLowerCase()&&(e=s)})),null===e?t:"german"==this.$store.state.language?v[e].german:v[e].english}}},P=O,V=(0,S.Z)(P,i,c,!1,null,"6268101e",null),j=V.exports,N={name:"StatisticsView",components:{Statistics:j}},F=N,B=(0,S.Z)(F,s,r,!1,null,null,null),U=B.exports}}]);
//# sourceMappingURL=statistics.0829821a.js.map